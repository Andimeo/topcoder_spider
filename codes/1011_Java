<td class="problemText" colspan="8" valign="middle" align="left">
            import java.awt.geom.*;<br>import java.io.*;<br>import java.math.*;<br>import java.util.*;<br> <br>public class Socialize {<br>  static int[][] g;<br>  static int n,m;<br>  static int tot,np;<br>  static int[] q = new int[60*60*4*3];<br>  static void bfs(int i, int j) {<br>    boolean[][] v = new boolean[n][m];<br>    int qh = 0;<br>    int qt = 0;<br>    q[qh++] = i;<br>    q[qh++] = j;<br>    q[qh++] = 0;<br>    int d,di,dj;<br>    while(qt&lt;qh) {<br>      i = q[qt++];<br>      j = q[qt++];<br>      d = q[qt++];<br>      if(v[i][j]) continue;<br>      v[i][j] = true;<br>      if(g[i][j]==2 &amp;&amp; d&gt;0) {<br>        tot += d;<br>        np++;<br>      }<br>      for(di=-1; di&lt;=1; di++)<br>      for(dj=(di==0?-1:0); dj&lt;=1; dj+=2)<br>      if(g[i+di][j+dj]&gt;0) {<br>        q[qh++] = i+di;<br>        q[qh++] = j+dj;<br>        q[qh++] = d+1;<br>      }<br>    }<br>  }<br>  public int average(String[] layout) {<br>    int i,j,k;<br>    int rval;<br>    n = layout.length+2;<br>    m = layout[0].length()+2;<br>    g = new int[n][m];<br>    for(i=1; i&lt;n-1; i++)<br>    for(j=1; j&lt;m-1; j++)<br>    g[i][j] = "#.P".indexOf(layout[i-1].charAt(j-1));<br>    np = 0;<br>    tot = 0;<br>    for(i=1; i&lt;n-1; i++)<br>    for(j=1; j&lt;m-1; j++)<br>    if(g[i][j] == 2) bfs(i,j);<br>    if(np==0) return 0;<br>    return (int)(tot*1.0/np+0.5);<br>  }<br>}<br></td>