<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br><br>public class FourBlocks {<br>  public int maxScore(string[] grid) {<br>        int height = grid.Length;<br>        int width = grid[0].Length;<br>        int[] max = new int[1 &lt;&lt; (height + 1)];<br>        for (int i = 0; i &lt; max.Length; ++i)<br>            max[i] = -1;<br>        max[max.Length - 1] = 0;<br>        for (int col = 0; col &lt; width; ++col)<br>            for (int row = 0; row &lt; height; ++row)<br>            {<br>                int[] nmax = new int[1 &lt;&lt; (height + 1)];<br>                for (int i = 0; i &lt; nmax.Length; ++i)<br>                    nmax[i] = -1;<br>                for (int mask = 0; mask &lt; (1 &lt;&lt; (height + 1)); ++mask)<br>                {<br>                    if (max[mask] &lt; 0)<br>                        continue;<br>                    if (row == 0)<br>                    {<br>                        int nmask = (mask &lt;&lt; 1) &amp; ((1 &lt;&lt; (height + 1)) - 1);<br>                        if (grid[row][col] != '.')<br>                            ++nmask;<br>                        nmax[nmask] = Math.Max(nmax[nmask], max[mask]);<br>                    }<br>                    else<br>                    {<br>                        int nmask = mask &amp; ~(1 &lt;&lt; row);<br>                        if (grid[row][col] != '.')<br>                            nmask += (1 &lt;&lt; row);<br>                        nmax[nmask] = Math.Max(nmax[nmask], max[mask]);<br>                        if (grid[row][col] == '.' &amp;&amp; (((mask &gt;&gt; (row - 1)) &amp; 7) == 0))<br>                        {<br>                            nmask = mask + (7 &lt;&lt; (row - 1));<br>                            nmax[nmask] = Math.Max(nmax[nmask], max[mask] + 1);<br>                        }<br>                    }<br>                }<br>                max = nmax;<br>            }<br>        int res = 0;<br>        foreach (int x in max)<br>            res = Math.Max(res, x);<br>        return res * 12 + height * width;<br>  }<br><br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>