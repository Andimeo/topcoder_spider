<td class="problemText" colspan="8" valign="middle" align="left">
            public class ParkAmusement<br>    {<br>    public double getProbability(string[] landings, int startLanding, int K)<br>        {<br>        int N = landings.Length;<br>        bool[,] graph = new bool[N,N];<br>        bool[] exits = new bool[N];<br>        bool[] pools = new bool[N];<br>        int[] pipes_out = new int[N];<br>        int[] pipes_in = new int[N];<br>        for (int i = 0; i &lt; N; i++)<br>            {<br>            exits[i] = landings[i][i] == 'E';<br>            pools[i] = landings[i][i] == 'P';<br>            pipes_out[i] = 0;<br>            pipes_in[i] = 0;<br>            }<br><br>        for (int i = 0; i &lt; N; i++)<br>            for (int j = 0; j &lt; N; j++)<br>                {<br>                graph[i, j] = landings[i][j] == '1';<br>                if (!graph[i, j])<br>                    continue;<br>                pipes_out[i]++;<br>                pipes_in[j]++;<br>                }<br>        double[] probability = new double[N];<br>        for (int i = 0; i &lt; N; i++)<br>            if (exits[i])<br>                probability[i] = 1;<br>            else<br>                probability[i] = 0;<br>        while (K-- &gt; 0)<br>            {<br>            double[] new_probability = new double[N];<br>            for (int i = 0; i &lt; N; i++)<br>                new_probability[i] = 0;<br>            for (int i = 0; i &lt; N; i++)<br>                for (int j = 0; j &lt; N; j++)<br>                    {<br>                    if (!graph[i, j] || probability[j] == 0)<br>                        continue;<br>                    new_probability[i] += probability[j]/pipes_out[i];<br>                    }<br>            probability = new_probability;<br>            }<br>        double sum = 0;<br>        for (int i = 0; i &lt; N; i++)<br>            sum += probability[i];<br>        if (sum == 0)<br>            return 0;<br>        return probability[startLanding]/sum;<br>        }<br>    }<br></td>