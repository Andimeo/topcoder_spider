<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br><br>public class CandyBox {<br>    public double[] expectedScore(int C, int[] score, int S) {<br><br>        int numsame = C * (C - 1) / 2;<br>        int numdiff = C * C;<br>        int N = score.Length;<br>        double[] lastscore = new double[N];<br>        for (int i = 0; i &lt; N; i++) {<br>            lastscore[i] = score[i]*C;<br>        }<br>        double chance = 1.0*numdiff/((C * N) * (C * N - 1) / 2);<br>        for (int i = 0; i &lt; S; i++) {<br>            double[] newscore = new double[N];<br>            Array.Copy(lastscore, newscore, N);<br>            for (int a = 0; a &lt; N; a++) {<br>                for (int b = a+1; b &lt; N; b++) {<br>                    newscore[a] -= chance*lastscore[a] / C;<br>                    newscore[b] -= chance * lastscore[b] / C;<br>                    newscore[a] += chance * lastscore[b] / C;<br>                    newscore[b] += chance * lastscore[a] / C;<br>                }<br>            }<br>            lastscore = newscore;<br>        }<br>        for (int i = 0; i &lt; N; i++) {<br>            lastscore[i] /= C;<br>        }<br>        return lastscore;<br><br>    }<br>}<br></td>