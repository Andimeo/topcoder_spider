<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Collections.Specialized;<br>using System.Text;<br>using System.Text.RegularExpressions;<br> <br> <br>public class TwoRegisters<br>{<br>  public string minProg(int r)<br>  {<br>        if (r == 1) return string.Empty;<br>      int ans = int.MaxValue;<br>    for (int p=1; p&lt;r; p++)<br>    {<br>        int l = getsteps(r, p);<br>            if (l &lt; ans) ans = l;<br>    }<br>      string ret = null;<br>        for (int p=1; p&lt;r; p++)<br>        {<br>            int l = getsteps(r, p);<br>            if (l == ans)<br>            {<br>                string now = BuildStr(r, p);<br>                if (ret == null || (now.Length &lt; ret.Length || (now.Length <br>                     == ret.Length <br>                     &amp;&amp; string.CompareOrdinal(now, ret) &lt; 0)))<br>                {<br>                    ret = now;<br>                }<br>            }<br>        }<br>      return ret;<br>  }<br> <br>    private string BuildStr(int x, int y)<br>    {<br>        StringBuilder sb = new StringBuilder();<br>        bool isx = true;<br>        while (y != 0)<br>        {<br>            int t = x%y;<br>            int q = x/y;<br>            for (int i=0; i&lt;q; i++)<br>            {<br>                if (isx)<br>                {<br>                    sb.Insert(0, 'X');<br>                }<br>                else sb.Insert(0, 'Y');<br>            }<br>            x = y;<br>            y = t;<br>            isx = !isx;<br>        }<br>        return sb.ToString(1, sb.Length-1);<br>    }<br> <br>    private int getsteps(int x, int y)<br>    {<br>        int now = 0;<br>        while (y != 0)<br>        {<br>            int t = x%y;<br>            now += x/y;<br>            x = y;<br>            y = t;<br>        }<br>        if (x != 1) return int.MaxValue;<br>        return now - 1;<br>    }<br> <br> <br>}<br>//Powered by KawigiEdit 2.1.4 (beta) modified by pivanof!<br></td>