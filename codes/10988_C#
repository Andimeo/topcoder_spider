<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br><br>using System.Text;<br><br>public class BankLottery<br>{<br>    public double expectedAmount(int[] accountBalance, int weeklyJackpot, int weekCount)<br>    {<br>        int total = 0;<br>        for (int i = 0; i &lt; accountBalance.Length; i++)<br>            total += accountBalance[i];<br>        // me - everyone else. - me defines the other.<br>        double[,] dp = new double[weekCount+1, weekCount+1];<br>        dp[0, 0] = 1.0;<br>        for (int i = 1; i &lt;= weekCount; i++)<br>        {<br>            for (int j = 0; j &lt;= i; j++)<br>            {<br>                // Probability of j wins in i weeks. = probability of j wins in i-1 weeks * probability of losing that situation + probabilityof j-1 wins in i-1 weeks * probability of winning in that situation.<br>                int prevTotal = total + (i-1) * weeklyJackpot;<br><br>                double loss = (double)(prevTotal - accountBalance[0] - j * weeklyJackpot) / (double)prevTotal;<br>                dp[i, j] = dp[i - 1, j] * loss;<br>                if (j &gt; 0)<br>                {<br>                    double win = (double)(accountBalance[0] + (j - 1) * weeklyJackpot) / (double)prevTotal;<br>                    dp[i, j] += dp[i - 1, j - 1] * win;<br>                }<br>            }<br>        }<br>        double expectation = 0.0;<br>        for (int j = 0; j &lt;= weekCount; j++)<br>        {<br>            expectation += dp[weekCount, j] * (accountBalance[0] + j * weeklyJackpot);<br>        }<br>        return expectation;<br>    }<br><br>}<br></td>