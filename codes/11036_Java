<td class="problemText" colspan="8" valign="middle" align="left">
            public class EllysPairing {<br>    public int getMax(int M, int[] count, int[] first, int[] mult, int[] add) {<br>        int maxValue = -1, maxCount = 0, n = count.length;<br>        int mask = M - 1;<br>        for(int i=0;i&lt;n;i++) {<br>            int num = first[i];<br>            for(int j=0;j&lt;count[i];j++) {<br>                if (maxCount == 0)<br>                    maxValue = num;<br>                if (num == maxValue)<br>                    maxCount++;<br>                else<br>                    maxCount--;<br>                <br>                num = (int)(((long)num * mult[i] + add[i]) &amp; mask);<br>            }<br>        }<br>        <br>        int realCount = 0, totalCount = 0;<br>        for(int i=0;i&lt;n;i++) {<br>            totalCount += count[i];<br>            int num = first[i];<br>            for(int j=0;j&lt;count[i];j++) {<br>                if (num == maxValue)<br>                    realCount++;<br>                num = (int)(((long)num * mult[i] + add[i]) &amp; mask);<br>            }<br>        }<br>        // System.out.println(maxValue + ":" + realCount);<br>        <br>        realCount -= (totalCount + 1) / 2;<br>        realCount = Math.max(realCount, 0);<br>        return totalCount / 2 - realCount;<br>        <br>        <br>    }<br>}<br>// Powered by [KawigiEdit] 2.0!<br></td>