<td class="problemText" colspan="8" valign="middle" align="left">
            public class FractionInDifferentBases {<br><br>  static long gcd(long a, long b) {<br>    return b == 0 ? a : gcd(b, a % b);<br>  }<br>  <br>  public static long getNumberOfGoodBases(long P, long Q, long A, long B) {<br>    long gcd = gcd(P, Q);<br>    Q /= gcd;<br>    long primes = 1;<br>    for (long p = 2; p * p &lt;= Q; p++) {<br>      if (Q % p == 0) {<br>        primes *= p;<br>        do {<br>          Q /= p;<br>        } while (Q % p == 0);<br>      }<br>    }<br>    if (Q &gt; 1) {<br>      primes *= Q;<br>    }<br>    return (B - A + 1) - (B / primes - (A - 1) / primes);<br>  }<br>}<br></td>