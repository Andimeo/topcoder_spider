<td class="problemText" colspan="8" valign="middle" align="left">
            // I think there are too many tournement rounds<br>// (i.e. I have something better to do now)<br><br>#include &lt;algorithm&gt;<br>using namespace std;<br><br>typedef long long ll;<br><br>#define LS &lt;<br><br>// All macros with parameters "k,a,b" run the "k" variable in range [a,b)<br>#define FOR(k,a,b) for(typeof(a) k=(a); k LS (b); ++k)<br><br>#define the<br>#line 3 "RowOfColors.cc"<br><br>#define P 1000000007<br><br>#define ZMAX 304<br><br>int dptable[2][ZMAX][ZMAX];<br><br>class RowOfColors {<br>  public:<br>  int countWays(int w, int h, int k) {<br>    // !FDI<br><br>    FOR(go,0,w+1) FOR(depth,0,ZMAX) FOR(usf,0,ZMAX) {<br>      ll res = 0;<br>      <br>      int p0 = (go&amp;1);<br>      int p1 = p0^1;<br>      <br>      // init<br>      if(go == 0 &amp;&amp; depth == 0 &amp;&amp; usf == 0) res = 1;<br>      <br>      // reuse the last one<br>      if(depth &gt; 0 &amp;&amp; go &gt; 0) res += dptable[p1][depth][usf];<br>      <br>      // start a new one<br>      if(depth &gt; 0 &amp;&amp; go &gt; 0 &amp;&amp; usf &gt; 0) res += dptable[p1][depth-1][usf-1];<br>      <br>      // finish<br>      if(go &gt; 0 &amp;&amp; depth &lt; h) res += dptable[p1][depth+1][usf];<br>      <br>      // small one<br>      if(go &gt; 0 &amp;&amp; usf &gt; 0 &amp;&amp; depth &lt; h) res += dptable[p1][depth][usf-1];<br>      <br>      res %= P;<br>      <br>      dptable[p0][depth][usf] = res;<br>      <br>      /* if(go &lt; 5 &amp;&amp; depth &lt; 5 &amp;&amp; usf &lt; 5 &amp;&amp; res)<br>        printf("%d %d %d: %d\n", go,depth,usf, int(res)); */<br>      }<br>    <br>    ll res = dptable[w&amp;1][0][k];<br>    <br>    FOR(u,1,k+1) { res *= u; res %= P; }<br>    <br>    return res;<br>    }<br>  };<br><br><br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003]<br>// Powered by CodeProcessor<br></td>