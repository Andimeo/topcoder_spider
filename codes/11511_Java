<td class="problemText" colspan="8" valign="middle" align="left">
            public class SRMSystemTestPhase {<br>  static int M = 1000000007;<br>  static String[] rows;<br>  public int countWays(String[] s) {<br>    rows = s;<br>    for(int i=0; i&lt;51; i++)<br>      for(int j=0; j&lt;4; j++)<br>        for(int k=0; k&lt;4; k++)<br>          dp[i][j][k] = -1;<br>    return dp(0,3,0);<br>  }<br>  int[][][] dp = new int[51][4][4];<br>  public int dp(int r, int max_passed, int min_challenged) {<br>    if(r == rows.length)<br>      return 1;<br>    if(dp[r][max_passed][min_challenged] &gt;= 0)<br>      return dp[r][max_passed][min_challenged];<br>    int ans = 0;<br>    int lim_i = rows[r].charAt(0)=='Y'?3:1;<br>    int lim_j = rows[r].charAt(1)=='Y'?3:1;<br>    int lim_k = rows[r].charAt(2)=='Y'?3:1;<br>    for(int i=0; i&lt;lim_i; i++)<br>      for(int j=0; j&lt;lim_j; j++)<br>        for(int k=0; k&lt;lim_k; k++) {<br>          int passed = 0;<br>          int challenged = 0;<br>          if(rows[r].charAt(0)=='Y' &amp;&amp; i==0)<br>            passed++;<br>          if(rows[r].charAt(0)=='Y' &amp;&amp; i==1)<br>            challenged++;<br>          if(rows[r].charAt(1)=='Y' &amp;&amp; j==0)<br>            passed++;<br>          if(rows[r].charAt(1)=='Y' &amp;&amp; j==1)<br>            challenged++;<br>          if(rows[r].charAt(2)=='Y' &amp;&amp; k==0)<br>            passed++;<br>          if(rows[r].charAt(2)=='Y' &amp;&amp; k==1)<br>            challenged++;<br>          if(passed &gt; max_passed || passed == max_passed &amp;&amp; challenged &lt; min_challenged)<br>            continue;<br>          ans = (ans+dp(r+1,passed,challenged))%M;<br>        }<br>    return dp[r][max_passed][min_challenged] = ans;<br>  }<br>}<br></td>