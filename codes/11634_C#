<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Text;<br><br>public class SPartition {<br>    public long getCount(string s)<br>    {<br>        long ret = 0;<br>        int n = s.Length;<br>        int len = n / 2;<br>        int i, j, k, l;<br>        int[] ar = new int[n];<br>        int counto = 0;<br>        for (i = 0; i &lt; n; i++) if (s[i] == 'o') { ar[i] = 1; counto++; }<br><br>        for (l = 0; l &lt; (1 &lt;&lt; len); l++)<br>        {<br>            int bit = bitcount(l);<br>            if (bit * 2 != counto) continue;<br>            //edakari<br>            long[,] dp = new long[n + 2, n + 2];<br>            dp[0, 0] = 1;<br>            for (j = 0; j &lt;= len; j++)<br>            {<br>                for (k = 0; k &lt;= len; k++)<br>                {<br>                    if (dp[j, k] == 0) continue;<br>                    int next = j + k;<br>                    if (next &gt;= n) continue;<br>                    if (j != len &amp;&amp; (l &gt;&gt; j) % 2 == ar[next]) dp[j + 1, k] += dp[j, k];<br>                    if (k != len &amp;&amp; (l &gt;&gt; k) % 2 == ar[next]) dp[j, k + 1] += dp[j, k];<br>                }<br>                //Console.WriteLine();<br>            }<br>            ret += dp[len, len];<br>        }<br><br>        return ret;<br>    }<br><br>    int bitcount(int a)<br>    {<br>        int ret = 0;<br>        for (int i = 0; i &lt;= 22; i++)<br>        {<br>            if ((a &gt;&gt; i) % 2 == 1) ret++;<br>        }<br>        return ret;<br>    }<br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>