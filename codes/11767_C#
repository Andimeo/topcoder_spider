<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Text;<br><br>public class DengklekBuildingRoads {<br>    long mod = 1000000007;<br>    public int numWays(int N, int M, int K)<br>    {<br>        long[,] dp = new long[M + 1, 1 &lt;&lt; (K+1)];<br>        int i, j, k, next;<br>        dp[0, 0] = 1;<br>        for (i = 0; i &lt; N; i++)<br>        {<br>            for (next = 1; next &lt;= K; next++)<br>            {<br>                if (i + next &gt;= N) continue;<br>                for (j = 0; j &lt;= M; j++)<br>                {<br>                    for (k = 0; k &lt; (1 &lt;&lt; (K + 1)); k++)<br>                    {<br>                        if (dp[j, k] == 0) continue;<br>                        if (j != M)<br>                        {<br>                            dp[j + 1, k ^ 1 ^ (1 &lt;&lt; next)] += dp[j, k];<br>                            dp[j + 1, k ^ 1 ^ (1 &lt;&lt; next)] %= mod;<br>                        }<br>                    }<br>                }<br>            }<br>            long[,] nextdp = new long[M + 1, (1 &lt;&lt; (K + 1))];<br>            for (j = 0; j &lt;= M; j++)<br>            {<br>                for (k = 0; k &lt; (1 &lt;&lt; (K + 1)); k += 2)<br>                {<br>                    nextdp[j, k / 2] = dp[j, k];<br>                }<br>            }<br>            dp = (long[,])nextdp.Clone();<br>        }<br>        return (int)dp[M, 0];<br>    }<br><br><br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>