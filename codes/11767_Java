<td class="problemText" colspan="8" valign="middle" align="left">
            import java.util.Comparator;<br>import java.util.Arrays;<br><br>/**<br> * Built using CHelper plug-in<br> * Actual solution is at the top<br> * @author Egor Kulikov (egor@egork.net)<br> */<br>public class DengklekBuildingRoads {<br>  long[][][][] result;<br>  int K;<br>  static final long MOD = (long)1e9 + 7;<br><br>  public int numWays(int N, int M, int K) {<br>    result = new long[N][M + 1][1 &lt;&lt; (K + 1)][K];<br>    this.K = K;<br>    ArrayUtils.fill(result, -1);<br>    return (int) go(N - 1, M, 0, 0);<br>  }<br><br>  private long go(int remainingHomes, int remainingRoads, int mask, int shift) {<br>    if (remainingHomes == -1)<br>      return remainingRoads == 0 &amp;&amp; mask == 0 ? 1 : 0;<br>    if (remainingRoads &lt; 0)<br>      return 0;<br>    if (shift == K)<br>      return (mask &amp; 1) == 0 ? go(remainingHomes - 1, remainingRoads, mask &gt;&gt; 1, 0) : 0;<br>    if (result[remainingHomes][remainingRoads][mask][shift] != -1)<br>      return result[remainingHomes][remainingRoads][mask][shift];<br>    if (shift &gt;= remainingHomes)<br>      return result[remainingHomes][remainingRoads][mask][shift] = go(remainingHomes, remainingRoads, mask, shift + 1);<br>    return (result[remainingHomes][remainingRoads][mask][shift] =<br>      go(remainingHomes, remainingRoads - 1, mask ^ (1 &lt;&lt; (shift + 1)) ^ 1, shift) +<br>      go(remainingHomes, remainingRoads, mask, shift + 1)) % MOD;<br>  }<br><br><br>}<br><br>class ArrayUtils {<br><br>  public static void fill(long[][] array, long value) {<br>    for (long[] row : array)<br>      Arrays.fill(row, value);<br>  }<br><br>  public static void fill(long[][][] array, long value) {<br>    for (long[][] row : array)<br>      fill(row, value);<br>  }<br><br>  public static void fill(long[][][][] array, long value) {<br>    for (long[][][] row : array)<br>      fill(row, value);<br>  }<br><br>  }<br><br><br><br>// Powered by FileEdit<br>// Powered by moj 4.17 [modified TZTester]<br>// Powered by CodeProcessor<br></td>