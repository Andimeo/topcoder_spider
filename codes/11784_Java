<td class="problemText" colspan="8" valign="middle" align="left">
            import java.util.Arrays;<br><br>public class MagicalGirl {<br><br>  private int M;<br>  private int[] day, win, gain;<br><br>  private double[][] memo;<br><br>  public double maxExpectation(int M, int[] day, int[] win, int[] gain) {<br>    for (int i = 0; i &lt; day.length; i++) {<br>      for (int j = day.length - 1; j &gt; i; j--) {<br>        if (day[j] &lt; day[j - 1]<br>            || (day[j] == day[j - 1] &amp;&amp; gain[j] * win[j] &gt; gain[j - 1]<br>                * win[j - 1])) {<br>          int t = day[j];<br>          day[j] = day[j - 1];<br>          day[j - 1] = t;<br><br>          t = win[j];<br>          win[j] = win[j - 1];<br>          win[j - 1] = t;<br><br>          t = gain[j];<br>          gain[j] = gain[j - 1];<br>          gain[j - 1] = t;<br>        }<br>      }<br>    }<br><br>    if (M &lt;= day[0])<br>      return M;<br><br>    this.M = M;<br>    this.day = day;<br>    this.win = win;<br>    this.gain = gain;<br>    memo = new double[day.length][M + 1];<br>    for (int i = 0; i &lt; gain.length; i++) {<br>      Arrays.fill(memo[i], Double.NEGATIVE_INFINITY);<br>    }<br>    return day[0] + go(0, M - day[0]);<br>  }<br><br>  private double go(int w, int m) {<br>    if (w == day.length)<br>      return m;<br>    if (!Double.isInfinite(memo[w][m]))<br>      return memo[w][m];<br>    double ret = m;<br>    int nm = gain[w] + m;<br>    if (nm &gt; M)<br>      nm = M;<br>    double tt = 0.01 * win[w] * nm;<br>    if (tt &gt; ret)<br>      ret = tt;<br>    if (w &lt; day.length - 1) {<br>      if (day[w + 1] - day[w] &lt; m) {<br>        double t = (day[w + 1] - day[w])<br>            + go(w + 1, m - (day[w + 1] - day[w]));<br>        if (t &gt; ret)<br>          ret = t;<br>      }<br>      if (day[w + 1] - day[w] &lt; nm) {<br>        double t = 0.01<br>            * win[w]<br>            * (day[w + 1] - day[w] + go(w + 1, nm<br>                - (day[w + 1] - day[w])));<br>        if (t &gt; ret)<br>          ret = t;<br>      }<br>    }<br>    return memo[w][m] = ret;<br>  }<br><br>}<br><br><br><br>// Powered by FileEdit<br>// Powered by moj 4.11 [modified TZTester]<br>// Powered by CodeProcessor<br></td>