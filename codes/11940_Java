<td class="problemText" colspan="8" valign="middle" align="left">
            /**<br> * Built using CHelper plug-in<br> * Actual solution is at the top<br> * @author Egor Kulikov (egor@egork.net)<br> */<br>public class SequenceTransmission {<br>  public long signalChanges(long a, long b, long n) {<br>    long answer = 0;<br>    if (a % 2 == 0 &amp;&amp; b % 2 == 0)<br>      answer += n;<br>    else if (a % 2 == 1 &amp;&amp; b % 2 == 0)<br>      answer += n / 2;<br>    else if (a % 2 == 1 &amp;&amp; b % 2 == 1)<br>      answer += (n + 1) / 2;<br>    if ((a * n + b) % 2 == 0)<br>      answer--;<br>    b += a;<br>    for (int i = 0; i &lt;= 60; i++) {<br>      long period = 1L &lt;&lt; (i + 2);<br>      long fullPeriodCount = n / period;<br>      long prePeriod = n % period;<br>      long current = 0;<br>      long total = 0;<br>      long mask = (1L &lt;&lt; i) - 1;<br>      long checkMask = (1L &lt;&lt; i) + (1L &lt;&lt; (i + 1));<br>      while (current &lt; period &amp;&amp; (fullPeriodCount != 0 || current &lt; prePeriod)) {<br>        long curValue = a * current + b;<br>        long next = curValue - (curValue &amp; mask) + (1L &lt;&lt; i);<br>        long step = 1;<br>        step = Math.max((next - curValue + a - 1) / a, step);<br>        if (current &lt; prePeriod &amp;&amp; current + step &gt; prePeriod)<br>          step = prePeriod - current;<br>        step = Math.min(step, period - current);<br>        long checkValue = (curValue &amp; checkMask) &gt;&gt; i;<br>        if (checkValue == 1 || checkValue == 2)<br>          total += step;<br>        current += step;<br>        if (current == prePeriod)<br>          answer += total;<br>      }<br>      answer += fullPeriodCount * total;<br>    }<br>    return answer - n;<br>  }<br><br>}<br><br><br><br>// Powered by FileEdit<br>// Powered by moj 4.17 [modified TZTester]<br>// Powered by CodeProcessor<br></td>