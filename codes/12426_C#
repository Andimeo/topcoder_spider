<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections.Generic;<br>using System.Text;<br><br><br>public class CentaurCompanyDiv2<br>{<br>    List&lt;List&lt;int&gt;&gt; g = new List&lt;List&lt;int&gt;&gt;();<br>    private int N;<br>    private bool[] used;<br>    private long[] x1, x2;<br><br>    void dfs(int k)<br>    {<br>        used[k] = true;<br>        bool list = true;<br>        foreach (int i in g[k])<br>        {<br>            if (!used[i]) list = false;<br>        }<br>        if(list)<br>        {<br>            x1[k] = 1;<br>            x2[k] = 0;<br>            return;<br>        }<br>        long y1 = 1;<br>        long y2 = 0;<br>        foreach (int i in g[k])<br>        {<br>            if(!used[i])<br>            {<br>                dfs(i);<br>                y1 *= (x1[i] + 1);<br>                y2 += x1[i] + x2[i];<br>            }<br>        }<br>                x1[k] = y1;<br>        x2[k] = y2;<br>    }<br><br>    public long count(int[] a, int[] b)<br>    {<br>        N = a.Length + 1;<br>        for (int i = 0; i &lt;= N; i++)<br>        {<br>            g.Add(new List&lt;int&gt;());<br>        }<br>        for (int i = 0; i &lt; N-1; i++)<br>        {<br>            g[a[i]].Add(b[i]);<br>            g[b[i]].Add(a[i]);<br>        }<br>        used = new bool[N+1];<br><br>        x1 = new long[N+1];<br>        x2 = new long[N+1];<br>                dfs(1);<br>        return x1[1] + x2[1]+1;<br>    }<br><br><br>}<br></td>