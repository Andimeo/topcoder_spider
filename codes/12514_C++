<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;vector&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>#include &lt;cstdio&gt;<br>#include &lt;map&gt;<br>#include &lt;cmath&gt;<br>#include &lt;cstdlib&gt;<br>#include &lt;queue&gt;<br>#include &lt;string&gt;<br>#include &lt;set&gt;<br>#include &lt;cstring&gt;<br>using namespace std;<br><br>#define For(i,n) for(int i=0;i&lt;n;i++)<br>#define ALL(n) n.begin(),n.end()<br>#define pb push_back<br>#define sz(i) int(i.size())<br><br>class EllysRoomAssignmentsDiv1<br>{<br>public:<br>    double getAverage(vector &lt;string&gt; ratings){<br>        string str = "";<br>        For(i,sz(ratings)) str+=ratings[i];<br>        vector&lt;int&gt;a;<br>        int num = 0;<br>        For(i,sz(str)){<br>            if(str[i]==' ') {a.pb(num);num=0;}<br>            else num=num*10+str[i]-'0';<br>        }<br>        if(num) a.pb(num);<br>        int n = sz(a);<br>        if(n&lt;=20){<br>            double sum = 0;<br>            For(i,n) sum += a[i];<br>            return sum / n;<br>        }<br>        int r = n / 20;<br>        if(n%20) r++;<br>        int s = a[0];<br>        sort(ALL(a));<br>        reverse(ALL(a));<br><br>        if(n % r ==0){<br>            double ret = 0;<br>            for(int i=0;i&lt;n;i+=r){<br>                double sum = 0;<br>                int in = 0;<br>                for(int j=i;j&lt;i+r;j++){<br>                    sum += a[j];<br>                    if(a[j]==s) in = 1;<br>                }<br>                if(in) ret += s;<br>                else ret += sum / r;<br>            }<br>            return ret / (n/r);<br>        }<br>        else{<br>            double ret = 0;<br>            int p = n/r;<br>            for(int i=0;i&lt;n;i+=r){<br>                double sum = 0;<br>                int in = 0;<br>                int ppl = 0;<br>                for(int j=i;j&lt;i+r&amp;&amp;j&lt;n;j++){<br>                    sum += a[j];<br>                    if(a[j] == s) in = 1;<br>                    ppl ++;<br>                }<br>                if(i+r&lt;n){<br>                    if(in) ret += s;<br>                    else ret += sum/ppl;<br>                }<br>                else{<br>                    if(in) return (ret + s) / (p + 1);<br>                    else{<br>                        double add = 1.0*(r-(n%r))/r;<br>                        return add * ret / p + (1-add) * (ret + sum/ppl) / (p+1);<br>                    }<br>                }<br>            }<br>        }<br>    }<br>};<br></td>