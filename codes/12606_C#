<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Text;<br>using System.Collections;<br>using System.Diagnostics;<br>using System.Collections.Generic;<br>public class TurnOnLamps<br>{<br>    public int minimize(int[] roads, string initState, string isImportant)<br>    {<br>        int n = roads.Length;<br>        List&lt;int&gt;[] num;<br>        List&lt;int&gt;[] edges = Make(roads, n, out num);<br>        int[] weight = new int[n + 1];<br>        int res = 0;<br>        for (int i = n - 1; i &gt;= 0; i--)<br>        {<br>            for (int j = 0; j &lt; edges[i].Count; j++)<br>            {<br>                int c = num[i][j];<br>                if (isImportant[c] == '1')<br>                {<br>                    if (initState[c] == '0')<br>                    {<br>                        res++;<br>                        weight[i]++;<br>                        if (weight[edges[i][j]] == 1)<br>                        {<br>                            res--;<br>                        }<br>                    }<br>                }//if<br>                else<br>                {<br>                    if (weight[edges[i][j]] == 1)<br>                    {<br>                        weight[i]++;<br>                    }<br>                }//else<br>            }//for j<br>            while (weight[i] &gt;= 2)<br>            {<br>                res--;<br>                weight[i] -= 2;<br>            }//while<br>        }//forrev i<br>        return res;<br>    }<br><br>    private List&lt;int&gt;[] Make(int[] roads, int n, out List&lt;int&gt;[] num)<br>    {<br>        List&lt;int&gt;[] edges = new List&lt;int&gt;[n];<br>        num = new List&lt;int&gt;[n];<br>        for (int i = 0; i &lt; n; i++)<br>        {<br>            edges[i] = new List&lt;int&gt;();<br>            num[i] = new List&lt;int&gt;();<br>        }//for i<br>        for (int j = 0; j &lt; roads.Length; j++)<br>        {<br>            int a = j + 1;<br>            int b = roads[j];<br>            edges[b].Add(a);<br>            num[b].Add(j);<br>        }//for j<br>        return edges;<br>    }<br><br>}//TurnOnLamps<br><br><br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] modified for C# by onigiri[25-Feb-2013]<br>// Powered by CodeProcessor<br></td>