<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Diagnostics;<br>using System.Linq;<br>using System.Numerics;<br>using System.Text;<br>using E = System.Linq.Enumerable;<br> <br>public class PalindromicSubstringsDiv1 {<br>    public double expectedPalindromes(string[] S1, string[] S2) {<br>        var S = String.Concat(S1) + String.Concat(S2);<br>        int n = S.Length;<br>        double ans = 0;<br>        for (int i = 0; i &lt; n; i++) {<br>            {<br>                int start = i, end = i;<br>                double percentage = 1.0;<br>                while (0 &lt;= start &amp;&amp; end &lt; n) {<br>                    double sub = 0.0;<br>                    if (start == end) {<br>                        sub = 1.0;<br>                    } else if (S[start] == '?' &amp;&amp; S[end] == '?') {<br>                        sub = 1.0 / 26;<br>                    } else if (S[start] == '?' || S[end] == '?') {<br>                        sub = 1.0 / 26;<br>                    } else if (S[start] == S[end]) {<br>                        sub = 1.0;<br>                    } else {<br>                        sub = 0.0;<br>                    }<br>                    percentage *= sub;<br>                    ans += percentage;<br>                    if (percentage == 0.0) break;<br>                    start--;<br>                    end++;<br>                }<br>            }<br>            {<br>                int start = i, end = i + 1;<br>                double percentage = 1.0;<br>                while (0 &lt;= start &amp;&amp; end &lt; n) {<br>                    double sub = 0.0;<br>                    if (start == end) {<br>                        sub = 1.0;<br>                    } else if (S[start] == '?' &amp;&amp; S[end] == '?') {<br>                        sub = 1.0 / 26;<br>                    } else if (S[start] == '?' || S[end] == '?') {<br>                        sub = 1.0 / 26;<br>                    } else if (S[start] == S[end]) {<br>                        sub = 1.0;<br>                    } else {<br>                        sub = 0.0;<br>                    }<br>                    percentage *= sub;<br>                    ans += percentage;<br>                    if (percentage == 0.0) break;<br>                    start--;<br>                    end++;<br>                }<br>            }<br>        }<br>        return ans;<br>    }<br>}<br> <br>// Powered by Greed 2.0-beta<br></td>