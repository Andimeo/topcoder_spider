<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;queue&gt;<br>#include &lt;map&gt;<br>#include &lt;set&gt;<br>#include &lt;iostream&gt;<br>#include &lt;algorithm&gt;<br>using namespace std;<br> <br>vector&lt;int&gt; parse(string s) {<br>  string d = " ;:,";<br>  vector&lt;int&gt; ret;<br>  char buf[20000];<br>  strcpy(buf, s.c_str());<br>  char* p  = strtok(buf, d.c_str());<br>  while(p) {<br>    ret.push_back(atoi(p));<br>    p = strtok(0, d.c_str());<br>  }<br>  return ret;<br>}<br> <br>int e[50][50];<br>int N;<br>map&lt;int, int&gt; m;<br> <br>class Circuits {<br>  public:<br>  int maxlen(int k) {<br>    if (m.count(k)) return m[k];<br>    int ret = 0;<br>    for (int i = 0; i &lt; N; i++) {<br>      if (e[k][i] == 0) continue;  <br>      ret = max(ret, e[k][i] + maxlen(i));<br>    }<br>    return m[k] = ret;<br>  }<br>  int howLong(vector&lt;string&gt; c, vector&lt;string&gt; t) {<br>    memset(e, 0, sizeof(e));<br>    N = c.size();    <br>    int i;<br>    for (i = 0; i &lt; N; i++) {<br>      vector&lt;int&gt; v = parse(c[i]);<br>      vector&lt;int&gt; w = parse(t[i]);<br>      for (int k = 0; k &lt; v.size(); k++) {<br>        e[i][v[k]] = w[k];  <br>      }<br>    }<br>    int ret = 0;<br>    for (i = 0; i &lt; N; i++) {<br>      ret = max(ret, maxlen(i));<br>    }<br>    return ret;<br>  }<br>};<br> <br>// Powered by PopsEdit<br></td>