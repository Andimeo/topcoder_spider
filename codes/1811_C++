<td class="problemText" colspan="8" valign="middle" align="left">
            #line 139 "CalendarISO.cpp"<br>#include &lt;stdlib.h&gt;<br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>#include &lt;sstream&gt;<br>#include &lt;map&gt;<br>#include &lt;set&gt;<br>#include &lt;queue&gt;<br>#include &lt;math.h&gt;<br>using namespace std;<br><br>#ifdef __GNUC__<br>typedef long long lint;<br>#else<br>typedef __int64 lint;<br>#pragma warn -csu<br>#endif<br><br>bool isvis(int x)<br>{<br> return x%4==0&amp;&amp;((x%100)!=0||(x%400)==0);<br>}<br><br>int dcnt[20000];<br>int dm[]={31,28,31,30,31,30,31,31,30,31,30,31};<br><br>void fill_dcnt()<br>{<br> int i;<br> dcnt[1]=2;<br> for(i=1;i&lt;=20000;i++)<br>  dcnt[i+1]=dcnt[i]+(isvis(i)?366:365);<br>}<br><br>int dayNumb(int Y,int M,int D)<br>{<br> if (Y&lt;10||Y&gt;11000||M&lt;1||M&gt;12||D&lt;1||D&gt;31)<br>  return -1;<br> bool vis=isvis(Y);<br> if (vis)<br>  dm[1]=29;<br> else<br>  dm[1]=28;<br> if (D&gt;dm[M-1])<br>  return -1;<br> int r=dcnt[Y];<br> int i;<br> for(i=0;i&lt;M-1;i++)<br>  r+=dm[i];<br> r+=D;<br> return r;<br>}<br><br>int sh[]={0,-1,-2,-3,3,2,1};<br><br>int getfd(int year)<br>{<br> int x=dayNumb(year,1,1);<br> int d=x%7;<br> return x+sh[d];<br>}<br><br>class CalendarISO<br>{<br>public:<br>  int weekNumber(int year, int month, int day)<br>  {<br>   fill_dcnt();<br>   int x=dayNumb(year,month,day);<br>   int xp=getfd(year-1);<br>   int xc=getfd(year);<br>   int xn=getfd(year+1);<br>   if (x&lt;xc) return 1+(x-xp)/7;<br>   if (x&lt;xn) return 1+(x-xc)/7;<br>   return 1+(x-xn)/7;<br>  }<br><br><br>};<br><br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003]<br>// Powered by CodeProcessor<br></td>