<td class="problemText" colspan="8" valign="middle" align="left">
            using namespace std;<br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br> <br>const int MAXN = 64;<br> <br>class ShuffleMethod {<br>public:<br>    vector &lt;int&gt; oneTime(vector &lt;int&gt; a) {<br>  // permutation square root<br>  int n = a.size();<br>  int pi2[MAXN];<br>  <br>  for (int i = 0; i &lt; n; i++)<br>      pi2[i] = a[i] - 1;<br>  <br>  int clen[MAXN], cmin[MAXN];<br>  for (int i = 0; i &lt; n; i++) {<br>      int len = 1, m = i;<br>      for (int j = pi2[i]; j != i; j = pi2[j]) {<br>    len++;<br>    m &lt;?= j;<br>      }<br>      clen[i] = len;<br>      cmin[i] = m;<br>  }<br>  <br>#if 0<br>  for (int i = 0; i &lt; n; i++)<br>      printf( "%d ", pi2[i] );<br>  printf( "\n" );<br>  for (int i = 0; i &lt; n; i++)<br>      printf( "%d ", clen[i] );<br>  printf( "\n" );<br>  for (int i = 0; i &lt; n; i++)<br>      printf( "%d ", cmin[i] );<br>  printf( "\n" );<br>#endif<br> <br>  int ncyc[MAXN];<br>  for (int i = 0; i &lt; MAXN; i++)<br>      ncyc[i] = 0;<br>  for (int i = 0; i &lt; n; i++)<br>      ncyc[clen[i]]++;<br>  for (int i = 1; i &lt; MAXN; i++) {<br>      ncyc[i] /= i;<br>       if ((i % 2 == 0) &amp;&amp; (ncyc[i] % 2 == 1)) {<br>    vector&lt;int&gt; empty;<br>    return empty;<br>      }<br>  }<br> <br>  int used[MAXN];<br>  int out[MAXN];<br>  for (int i = 0; i &lt; n; i++)<br>      used[i] = 0;<br> <br>  for (int i = 0; i &lt; n; i++) {<br>      if (used[i])<br>    continue;<br> <br>      int k = clen[i];<br>      int bo = n+1;<br>      for (int j = 0; j &lt; n; j++)<br>    if (!used[j] &amp;&amp; clen[j] == clen[i] &amp;&amp; cmin[j] != cmin[i])<br>        bo &lt;?= j;<br>      if (k % 2) {<br>    int np = (k + 1) / 2;<br>    int j = i;<br>    for (int m = 0; m &lt; np; m++)<br>        j = pi2[j];<br>    if (j &lt; bo) {<br>        // do stuff<br>        for (int m = 0; m &lt; k; m++) {<br>      out[i] = j;<br>      used[i] = 1;<br>      i = pi2[i];<br>      j = pi2[j];<br>        }<br>        continue;<br>    }<br>      }<br>      //printf( "%d: %d\n", i, bo );<br>      // do other stuff<br>      for (int m = 0; m &lt; k; m++) {<br>    out[i] = bo;<br>    out[bo] = pi2[i];<br>    used[i] = used[bo] = 1;<br>    i = pi2[i];<br>    bo = pi2[bo];<br>      }<br>  }<br>  <br>  vector&lt;int&gt; result;<br>  for (int i = 0; i &lt; n; i++)<br>      result.push_back( out[i]+1 );<br> <br>  return result;<br>    }<br>};<br> <br> <br>// Powered by FileEdit<br></td>