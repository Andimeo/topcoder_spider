<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Text;<br>using System.Text.RegularExpressions;<br>using System.Collections;<br><br>public class RoomSummary : IComparer {<br>    public int Compare( object A, object B ) {<br>        CR a = (CR)A;<br>        CR b = (CR)B;<br>        if ( Math.Abs(a.r-b.r) &gt; 1e-9 ) return Math.Sign( b.r-a.r );<br>        return String.CompareOrdinal( a.h, b.h );<br>    }<br>    string key( string a, string b ) {<br>        return a+"#"+b;<br>    }<br>    class CR {<br>        public CR( string s, double d ) {<br>            h=s;r=d;<br>        }<br>        public string h;<br>        public double r;<br>    }<br>    public string[] generate(string[] pp, string[] hh, string[] ss, string[] cc, string[] ff) {<br>        Hashtable ht = new Hashtable();<br>        foreach( string s in hh ) foreach( string p in pp ) ht[key(s,p)] = 0.0;<br>        foreach( string s in ss ) {<br>            string[] t = s.Split(" ".ToCharArray());<br>            ht[key(t[0],t[1])] = double.Parse(t[2]);<br>        }<br>        Hashtable dd = new Hashtable();<br>        foreach( string s in hh ) dd[s] = 0;<br>        foreach( string s in cc ) {<br>            string[] t = s.Split(" ".ToCharArray());<br>            if ( t[3][0]=='s' ) {<br>                dd[t[0]] = ((int)dd[t[0]])+50;<br>                ht[key(t[1],t[2])] = 0.0;<br>            } else {<br>                dd[t[0]] = ((int)dd[t[0]])-50;<br>            }<br>        }<br>        foreach( string s in ff ) {<br>            string[] t = s.Split(" ".ToCharArray());<br>            ht[key(t[0],t[1])] = 0.0;<br>        }<br>        CR[] cr = new CR[hh.Length];<br>        for ( int i = 0 ; i != cr.Length; i++ ) {<br>            cr[i] = new CR( hh[i], (int)dd[hh[i]] );<br>            foreach( string p in pp )<br>                cr[i].r += (double)ht[key(cr[i].h, p )];<br>        }<br>        Array.Sort( cr, this );<br>        string[] res = new string[cr.Length];<br>        for( int i = 0; i != cr.Length; i++ )<br>            res[i] = cr[i].h+" "+ String.Format("{0:0.00}", cr[i].r);<br>        return res;<br>    }<br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by CodeProcessor<br></td>