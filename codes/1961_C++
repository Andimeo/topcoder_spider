<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>#include &lt;cstdio&gt;<br>#include &lt;cstdlib&gt;<br>#include &lt;cmath&gt;<br>using namespace std;<br>typedef vector&lt;int&gt; VI; typedef vector&lt;VI&gt; VVI;<br>typedef vector&lt;string&gt; VS; typedef vector&lt;VS&gt; VVS;<br>typedef long long i64; typedef unsigned long long u64;<br><br>int nseen = 0;<br>struct Node {<br>  Node *lc, *rc;<br>  int v;<br>  int seen;<br>  void rec() {<br>    if( seen ) return;<br>    seen = 1;<br>    nseen++;<br>    if( lc ) lc-&gt;rec();<br>    if( rc ) rc-&gt;rec();<br>  }<br>  Node(int v) : lc(0), rc(0), seen(0), v(v) {}<br>};<br><br>class ImmutableTrees {<br>public:<br>int numNodes(vector &lt;int&gt; values, vector &lt;int&gt; trees, vector &lt;int&gt; garbage) {<br>  int i, j, k, x, y, z, n;<br>  int ret;<br><br>  vector&lt;Node *&gt; t;<br>  for( i = 0; i &lt; values.size(); i++ ) {<br>    if( trees[i] == -1 ) {<br>      t.push_back(new Node(values[i]));<br>      continue;<br>    }<br>    t.push_back(new Node(0));<br>    Node *v = t[trees[i]], *cur = t.back();<br>    for(;;) {<br>      *cur = *v;<br>      if( values[i] &lt; v-&gt;v ) {<br>        if( !cur-&gt;lc ) {<br>          cur-&gt;lc = new Node(values[i]);<br>          break;<br>        } else {<br>          cur-&gt;lc = new Node(0);<br>          cur = cur-&gt;lc;<br>          v = v-&gt;lc;<br>        }<br>      } else {<br>        if( !cur-&gt;rc ) {<br>          cur-&gt;rc = new Node(values[i]);<br>          break;<br>        } else {<br>          cur-&gt;rc = new Node(0);<br>          cur = cur-&gt;rc;<br>          v = v-&gt;rc;<br>        }<br>      }<br>    }<br>  }<br>  for( i = 0; i &lt; t.size(); i++ )<br>    if( find(garbage.begin(), garbage.end(), i) == garbage.end() )<br>      t[i]-&gt;rec();<br>  return nseen;    <br>}<br>};<br><br><br>// Powered by FileEdit<br></td>