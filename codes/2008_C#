<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>public class LogCabin <br>{<br>  public int maxStrips(int[] fabrics) <br>  {<br>    rec(fabrics[0],fabrics[1],fabrics[2],fabrics[3],1,0,new int[50], 0);<br>    return best;<br>  }<br><br>  int best = 0;<br>  void rec(int a, int b, int c, int d, int len, int num, int[] hist, int loc)<br>  {<br>    best = Math.Max(loc,best);<br>    int nnum, nlen=len;<br>    if ( num == 1 )<br>    {<br>      nnum = 0;<br>      nlen = len+1;<br>    }<br>    else<br>      nnum = 1;<br><br>    if ( a &gt;= len &amp;&amp; good(hist,loc,1) )<br>    {<br>      int[] na = new int[50];<br>      Array.Copy(hist,na,loc);<br>      na[loc] = 1;<br>      rec(a-len,b,c,d,nlen,nnum,na,loc+1);<br>    }<br><br>    if ( b &gt;= len &amp;&amp; good(hist,loc,2) )<br>    {<br>      int[] na = new int[50];<br>      Array.Copy(hist,na,loc);<br>      na[loc] = 2;<br>      rec(a,b-len,c,d,nlen,nnum,na,loc+1);<br>    }<br><br>    if ( c &gt;= len &amp;&amp; good(hist,loc,3) )<br>    {<br>      int[] na = new int[50];<br>      Array.Copy(hist,na,loc);<br>      na[loc] = 3;<br>      rec(a,b,c-len,d,nlen,nnum,na,loc+1);<br>    }<br><br>    if ( d &gt;= len &amp;&amp; good(hist,loc,4) )<br>    {<br>      int[] na = new int[50];<br>      Array.Copy(hist,na,loc);<br>      na[loc] = 4;<br>      rec(a,b,c,d-len,nlen,nnum,na,loc+1);<br>    }<br>  }<br><br>  bool good(int[] hist, int loc, int fab)<br>  {<br>    if ( loc == 2 &amp;&amp; (hist[loc-1] == fab || hist[loc-2] == fab) ) return false;<br><br>    if ( loc &gt; 0 &amp;&amp; hist[loc-1] == fab )<br>      return false;<br>    if ( loc &gt; 2 &amp;&amp; hist[loc-3] == fab )<br>      return false;<br>    if ( loc &gt; 3 &amp;&amp; hist[loc-4] == fab )<br>      return false;<br>    return true;<br>  }<br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by CodeProcessor<br></td>