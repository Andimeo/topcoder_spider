<td class="problemText" colspan="8" valign="middle" align="left">
            using System; using System.Collections; using System.Text; public class TCSocks { public int earnMoney(int[] M, string[] C, string[] T, string[] comp) {<br>int N = C.Length;<br> <br>int[,] tt = new int[N,N], cc = new int[N,N];<br>for (int i=0; i&lt;N; i++) for (int j=0; j&lt;N; j++)<br> {<br> tt[i,j] = Convert.ToInt32(T[i].Split(' ')[j]);<br> cc[i,j] = Convert.ToInt32(C[i].Split(' ')[j]);<br> }<br> <br>int[,] ct = new int[comp.Length, N];<br>for (int i=0; i&lt;comp.Length; i++)<br> {<br> for (int j=0; j&lt;N; j++)<br>  ct[i,j] = 999999;<br> int city = 0;<br> int time = 0;<br> foreach (String s in comp[i].Split(' '))<br>  {<br>  int next = Convert.ToInt32(s);<br>  time += tt[city, next];<br>  city = next;<br>  ct[i,next] = time;<br>  }<br> }<br> <br> <br>// profit[mask, city, time] -&gt; best profit to get home starting at city at time, having visited mask<br>int[,,] profit = new int[512, 10, 100];<br> <br>for (int time=99; time&gt;=0; time--)<br> for (int city=0; city&lt;N; city++) if (city &gt; 0 || time == 0)<br>  for (int mask=0; mask&lt;=511; mask++)<br>   {<br>   int best = -9999999;<br>   for (int next=0; next&lt;N; next++)<br>    if (next != city)<br>     if (next == 0 || (mask &amp; (1&lt;&lt;(next-1))) == 0)<br>      {<br>      int t2 = time + tt[city, next];<br>      if (t2 &gt; 99) continue;<br>      int cur = M[next];<br>      for (int i=0; i&lt;comp.Length; i++)<br>       if (ct[i, next] &lt;= t2)<br>        cur &gt;&gt;= 1;<br>      int cost = cc[city, next];<br>      // WS(best, mask, next, t2); WL();<br>      int m2 = mask;<br>      if (next &gt; 0) m2 |= 1 &lt;&lt; next-1;<br>      best = Math.Max(best, profit[m2, next, t2] + cur - cost);<br>      }<br> <br>   profit[mask, city, time] = best;<br>   //if (time &lt;= 3 &amp;&amp; mask &lt;= 7)<br>   //   { WS(mask, city, time, best); WL(); }<br>   }<br> <br>return Math.Max(0, profit[0, 0, 0]);<br>}<br> <br> <br>static void WR(Object x, params object[] p) { Console.Write(x.ToString(), p); }<br>static void WL(Object x, params object[] p) { Console.WriteLine(x.ToString(), p); }<br>static void WL() { WL(""); }<br>static void WS(params Object[] c) { foreach (Object x in c) WR(x.ToString() + " "); }<br>static void WS(Array ar, int X) { for (int x=0; x&lt;X; x++) WS(ar.GetValue(x)); WL(); }<br>static void WS(Array ar, int X, int Y) { for (int y=0; y&lt;Y; y++) { for (int x=0; x&lt;X; x++) WS(ar.GetValue(x,y)); WL(); }}<br>}<br></td>