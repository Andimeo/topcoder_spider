<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br> <br>public class grafixMask<br>{<br>  const int n = 400;<br>  const int m = 600;<br>  byte[,] field = new byte[n,m];<br>  int cnt;<br>  int[] q = new int [n*m];<br> <br>  public void go(int i, int j)<br>  {<br>    int p1, p2;<br>    p1 = p2 = 0;<br>    q[0] = m*i + j;<br>    field[i,j] = 0;<br>    cnt = 1;<br>    while (p1 &lt;= p2)<br>    {<br>      i = q[p1] / m;<br>      j = q[p1] % m;<br>      p1++;<br>      if (i &gt; 0 &amp;&amp; field[i-1, j] == 1)<br>      {<br>        field[i-1, j] = 0;<br>        q[++p2] = m*(i-1) + j;<br>        cnt++;<br>      }<br>      if (i &lt; n-1 &amp;&amp; field[i+1, j] == 1)<br>      {<br>        field[i+1, j] = 0;<br>        q[++p2] = m*(i+1) + j;<br>        cnt++;<br>      }<br>      if (j &gt; 0 &amp;&amp; field[i, j-1] == 1)<br>      {<br>        field[i, j-1] = 0;<br>        q[++p2] = m*i + j-1;<br>        cnt++;<br>      }<br>      if (j &lt; m - 1 &amp;&amp; field[i, j+1] == 1)<br>      {<br>        field[i, j+1] = 0;<br>        q[++p2] = m*i + j+1;<br>        cnt++;<br>      }<br>    }<br>  }<br> <br>  public int[] sortedAreas(string[] rect)<br>  {<br>    ArrayList al;<br>    int i, j, k;<br>    <br>    for (i = 0; i &lt; n; i++)<br>      for (j = 0; j &lt; m; j++)<br>        field[i,j] = 1;<br>    for (i = 0; i &lt; rect.Length; i++)<br>    {<br>      string[] ss = rect[i].Split(' ');<br>      int r1 = int.Parse(ss[0]);<br>      int c1 = int.Parse(ss[1]);<br>      int r2 = int.Parse(ss[2]);<br>      int c2 = int.Parse(ss[3]);<br>      for (j = r1; j &lt;= r2; j++)<br>        for (k = c1; k &lt;= c2; k++)<br>          field[j,k] = 0;<br>    }<br>    al = new ArrayList();<br>    for (i = 0; i &lt; n; i++)<br>      for (j = 0; j &lt; m; j++)<br>        if (field[i,j] == 1)<br>        {<br>          cnt = 0;<br>          go(i,j);<br>          al.Add(cnt);<br>        }<br>    int[] res = new int[al.Count];<br>    al.CopyTo(res);<br>    Array.Sort(res);<br>    return res;<br>  }<br>}<br></td>