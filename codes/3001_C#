<td class="problemText" colspan="8" valign="middle" align="left">
            using System; using System.Collections; using System.Text; using System.Text.RegularExpressions;<br>public class SureThing { public double maximum(int[] M) {<br>int N = M.Length;<br>Array.Sort(M); Array.Reverse(M);<br>long X = 0;<br>for (int i=0; i&lt;N; i++) X += (long)M[i] &lt;&lt; 8*i;<br>Console.WriteLine("{0:X}", X);<br>double d = F(X);<br>// foreach (DictionaryEntry de in m) Console.WriteLine("{0:X} {1}", de.Key, de.Value);<br>WSL(m.Count);<br>return d;<br>}<br> <br>Hashtable m = MAP;<br>double F(long X)<br>{<br>Object o = m[X];<br>if (o != null) return (double)o;<br>if (X &lt; 256) { m[X] = Math.Pow(2, X); return (double) m[X]; }<br>int a = (int)(X&amp;255), b = (int)((X&gt;&gt;8)&amp;255);<br>double d;<br>if (a == b)<br> {<br> // no bet; decrement first entry equal to a<br> int i=1;<br> while (i&lt;5 &amp;&amp; a == (255 &amp; (X&gt;&gt;8*(i+1))))<br>  i++;<br> d = F(X - ((long)1&lt;&lt;8*i));<br> }<br>else<br> {<br> // bet; recurse on a and on first entry equal to b<br> // dA is worst outcome<br> double dA = F(X-1);<br> int i=1;<br> while (i&lt;5 &amp;&amp; b == (255 &amp; (X&gt;&gt;8*(i+1))))<br>  i++;<br> double dB = F(X-((long)1&lt;&lt;8*i));<br> double p = (dB-dA) / (dA+dB);<br> d = (1+p) * dA;<br> }<br> <br>m[X] = d; return d;<br>}<br> <br> <br>bool Test(int x, int y) { return (x &amp; (1&lt;&lt;y)) != 0; }<br> <br>ArrayList AR { get { return new ArrayList(); }}<br>static Hashtable MAP { get { return new Hashtable(); }}<br> <br>int[] IA(ArrayList ar) { return (int[]) ar.ToArray(typeof(int)); }<br>String[] SA(ArrayList ar) { return (String[]) ar.ToArray(typeof(string)); }<br> <br>int INT(Object o) { return Convert.ToInt32(o.ToString()); }<br>long LONG(Object o) { return Convert.ToInt64(o.ToString()); }<br>double DOUBLE(Object o) { return Convert.ToDouble(o.ToString()); }<br> <br>bool NextPerm(int[] a)<br>{<br>int N = a.Length;<br>for (int i=N-2; i&gt;=0; i--) if (a[i] &lt; a[i+1])<br> {<br> Array.Reverse(a, i+1, N-i-1);<br> for (int j=i+1; ; j++) if (a[i] &lt; a[j])<br>  { int t=a[i]; a[i] = a[j]; a[j] = t; return true; }<br> }<br>return false;<br>}<br> <br>void WL() { Console.WriteLine(""); }<br>void WS(params Object[] x) { foreach (Object o in x) Console.Write("{0} ", o); }<br>void WSL(params Object[] x) { WS(x); WL(); }<br>void WS(Array a, int X) { for (int i=0; i&lt;X; i++) WS(a.GetValue(i)); WL(); }<br>void WS(Array a, int X, int Y) { for (int y=0; y&lt;Y; y++) { for (int x=0; x&lt;X; x++) WS(a.GetValue(x,y)); WL(); }}<br>}<br></td>