<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Text;<br> <br>public class TreeSpreading<br>{<br>    public long countArrangements(int a,int b,int c,int d)<br>    {<br>        long[,,,,,] dp=new long[a+2,b+2,c+2,d+2,5,5];<br>        dp[0,0,0,0,0,0]=1;<br>        int[] i=new int[4];<br>        for (i[0]=0; i[0]&lt;=a; i[0]++)<br>            for (i[1]=0; i[1]&lt;=b; i[1]++)<br>                for (i[2]=0; i[2]&lt;=c; i[2]++)<br>                    for (i[3]=0; i[3]&lt;=d; i[3]++)<br>                    {<br>                        for (int j1=0; j1&lt;=4; j1++)<br>                            for (int j2=0; j2&lt;=4; j2++)<br>                            {<br>                                long t=dp[i[0],i[1],i[2],i[3],j1,j2];<br>                                if (t!=0)<br>                                    for (int k=1; k&lt;=4; k++)<br>                                        if (k!=j2)<br>                                        {<br>                                            i[k-1]++;<br>                                            dp[i[0],i[1],i[2],i[3],j2,k]+=t;<br>                                            i[k-1]--;<br>                                        }<br>                            }<br>                    }<br>        long sum=0;<br>        for (int j1=0; j1&lt;=4; j1++)<br>            for (int j2=0; j2&lt;=4; j2++)<br>                sum+=dp[a,b,c,d,j1,j2];<br>        return sum;<br>    }<br>}<br></td>