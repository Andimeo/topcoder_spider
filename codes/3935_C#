<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br> <br>public class SmartWordToy<br>{<br> <br> <br>  int encodea(char[] w)<br>  {<br>    int r = 0;<br>    for (int i = 0; i &lt; w.Length; i++)<br>      r = r * 26 + w[i] - 'a';<br>    return r;<br>  }<br> <br>  int encode(string w)<br>  {<br>    int r = 0;<br>    for (int i = 0; i &lt; w.Length; i++)<br>      r = r * 26 + w[i] - 'a';<br>     return r;<br>  }<br>  <br>  string decode(int x)<br>  {<br>    string s = "";<br>    for (int i = 3; i &gt;= 0; i--)<br>    {<br>      s = (char)('a' + (x % 26)) + s;<br>      x /= 26;<br>    }<br>    return s;  <br>  }<br>  <br>  public int minPresses(string start, string finish, string[] forbid)<br>  {<br>    int maxn = 26*26*26*26;<br>    int[] a = new int[maxn];<br>    for (int i = 0; i &lt; maxn; i++)<br>      a[i] = 0;<br>    <br>    foreach(string s in forbid) {<br>      string[] w = s.Split();<br>      foreach(char a0 in w[0])<br>        foreach(char a1 in w[1])<br>          foreach(char a2 in w[2])<br>            foreach(char a3 in w[3])<br>              a[(a0 - 'a') * 26 * 26 * 26 + (a1 - 'a') * 26 * 26 + (a2 - 'a') * 26 + (a3 - 'a')] = -1;<br>    }<br>    <br>    int first = encode(start);<br>    int target = encode(finish);<br>    int[] q = new int[maxn];<br>    int q1 = 0, q2 = 0;<br>    q[0] = first;<br>    a[first] = 1;<br>    <br>    while (q1 &lt;= q2) {<br>      int v = q[q1];<br>      string s = decode(v);<br>      for (int i = 0; i &lt; s.Length; i++) {<br>        char[] ns = s.ToCharArray();<br>        if (ns[i] == 'a')<br>          ns[i] = 'z';<br>        else<br>          ns[i]--;<br>        int nv = encodea(ns);<br>        if (a[nv] == 0) {<br>          a[nv] = a[v] + 1;<br>          q2++;<br>          q[q2] = nv;<br>        }<br>        <br>        ns = s.ToCharArray();<br>        if (ns[i] == 'z')<br>          ns[i] = 'a';<br>        else<br>          ns[i]++;<br>        nv = encodea(ns);<br>        if (a[nv] == 0) <br>        {<br>          a[nv] = a[v] + 1;<br>          q2++;<br>          q[q2] = nv;<br>        }<br>      }<br>      q1++;<br>    }<br>     <br>    if (a[target] &lt;= 0)<br>      return -1;<br>    else<br>      return (a[target] - 1);<br>  }<br> <br>  [STAThread]<br>  static void Main(string[] args)<br>  {<br>    SmartWordToy obj = new SmartWordToy();<br>    obj.minPresses("aaaa", "zzzz", new string[] {"a a a z", "a a z a", "a z a a", "z a a a", "a z z z", "z a z z", "z z a z", "z z z a"});<br>  }<br>}<br></td>