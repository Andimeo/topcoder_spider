<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>#include &lt;sstream&gt;<br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;queue&gt;<br>#include &lt;set&gt;<br>#include &lt;map&gt;<br><br>#include &lt;cmath&gt;<br>#include &lt;cctype&gt;<br><br>using namespace std;<br><br>#define ALL(i,v) for(unsigned (i)=0; (i)!=v.size(); (i)++)<br>#define MAXN 64<br><br>#define X (x+dx[k])<br>#define Y (y+dy[k])<br><br>#define NEI8 for(int k=0; k&lt;8; k++)<br>#define NEI4 for(int k=0; k&lt;4; k++)<br><br>int dx[16] = {-1,0,0,1,1,-1,-1,1};<br>int dy[16] = {0,-1,1,0,1,-1,1,-1};<br><br>int ar[MAXN][MAXN] = {};<br>int vis[MAXN][MAXN] = {};<br>int S = 0;<br>int N,M;<br><br>int ok (int x,int y) {<br>    if (x &lt; 1 || y &lt; 1 || x &gt; N || y &gt; M) return 0;<br>    return 1;<br>}<br><br>int dfs (int x,int y) {<br>    S++;<br>    <br>    vis[x][y] = 1;<br><br>    int c = 0;<br>    NEI4 {<br>         if (ok(X,Y) &amp;&amp; vis[X][Y] == 0) c += ar[X][Y];<br>    }<br>    <br>    if (c==0) {<br>       NEI4 {<br>            if (ok(X,Y)) c += ar[X][Y];<br>       }<br>       if (c == 1) return 1;<br>       else return 0;<br>    }<br>    <br>    if (c==1)<br>    NEI4 {<br>         if (ok(X,Y) &amp;&amp; vis[X][Y] == 0 &amp;&amp; ar[X][Y] == 1) {<br>            return dfs(X,Y);<br>         }<br>    }<br>    return 0;<br>}<br><br>class SnakeCount { <br>public: <br>int number (vector &lt;string&gt; K) {<br>    memset(ar,0,sizeof(ar));<br>    <br>    N = K.size();<br>    M = K[0].size();<br>    int ans = 0;<br>    <br>    ALL (i,K) {<br>        ALL (j,K[i]) {<br>            ar[i+1][j+1] = K[i][j]-'0';<br>        }<br>    }<br><br>    for (int i=1; i&lt;=N; i++) {<br>        for (int j=1; j&lt;=M; j++) {<br><br>                if (ar[i][j] != 1) continue;<br>            int c = 0;<br>            int x = i;<br>            int y = j;<br>            <br>            NEI4 {<br>                if (ok(X,Y)) {<br>                   c += ar[X][Y];<br>                }<br>            }<br><br>            if (c == 1) {<br>               memset(vis,0,sizeof(vis));<br>               S = 0;<br>               if (dfs(i,j)) {<br><br>               int flag = 0;<br>    for (int i1=1; i1&lt;=N; i1++) {<br>        for (int j1=1; j1&lt;=M; j1++) {<br>            if (vis[i1][j1]==1) {<br>               x = i1;<br>               y = j1;<br>               NEI8 {<br>                    if (ok(X,Y) &amp;&amp; vis[X][Y]==0 &amp;&amp; ar[X][Y]==1) {<br>                       flag = 1;<br>                       goto done;<br>                    }<br>               }<br>            }<br>        }<br>    }<br>    done:;<br>    <br>    if (flag == 0 &amp;&amp; S&gt;= 3 &amp;&amp; S&lt;=20) ans++;<br><br>               }<br>            }<br>        }<br>    }<br>    return ans/2;<br>} <br><br><br> <br>}; <br><br><br><br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003]<br>// Powered by CodeProcessor<br></td>