<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Specialized;<br> <br>public class SequenceSync{<br> <br> public int getLength(String[] s) {<br>  int n=s.Length;<br>  if (n==1) return 0;<br>  int[,] a=new int[n,4];<br>  int[] p1=new int[1&lt;&lt;20];<br>  int[] p2=new int[1&lt;&lt;20];<br>  bool[] ok=new bool[1&lt;&lt;20];<br>  for (int i=0;i&lt;n;i++) {<br>   string[] p=s[i].Split();<br>   for (int j=0;j&lt;4;j++) a[i,j]=int.Parse(p[j]);<br>   ok[1&lt;&lt;i]=true;<br>  }<br>  for (int i=0;i&lt;p2.Length;i++) p2[i]=-1;<br>  int first=0,last=0,g=(1&lt;&lt;n)-1;<br>  p1[0]=g; p2[g]=0;<br>  do {<br>   int x=p1[first]; first++;<br>   for (int i=0;i&lt;4;i++) {<br>    int y=0;<br>    for (int j=0;j&lt;n;j++) if ((x&gt;&gt;j&amp;1)==1) y|=1&lt;&lt;a[j,i];<br>    if (p2[y]==-1) {<br>     p2[y]=p2[x]+1; last++; p1[last]=y;<br>     if (ok[y]) return p2[y];<br>    }<br>   }<br>  }while (first&lt;=last);<br>  return -1;<br> }<br>  <br>}<br>//hilfiger's editor<br></td>