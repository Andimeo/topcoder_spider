<td class="problemText" colspan="8" valign="middle" align="left">
            #line 2 "RingCount.cpp"<br><br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;stdio.h&gt;<br><br>using namespace std;<br><br>#define LS &lt;<br><br>#define Size(x) ((x).size())<br><br>#define LET(n, v) typeof(v) n = (v);<br><br>#define FOR(k,a,b) for(typeof(a) k = (a); k LS (b); k++)<br><br>#define CLC(act, ret) (*({act; static typeof(ret) CLCR = (ret); &amp;CLCR;}))<br><br>#define FIRST(k,a,b,cond) \<br>  CLC(LET(k,a); for(; k&lt;(b); k++) if(cond) break, k)<br><br>#define  FORALL(k,a,b,cond) (FIRST(k,a,b,cond) == (b))<br>#define  EXISTS(k,a,b,cond) (!FORALL(k,a,b,!(cond)))<br><br>#define SUM(k,a,b,val) \<br>        CLC(LET(k, a); LET(res, (typeof(val)) (0)); for(; k&lt;(b); k++) res += val, res)<br><br>#define MAX(k,a,b,val) \<br>        CLC(LET(k, a); LET(res, val); for(k++; k&lt;(b); k++) res &gt;?= val, res)<br><br>typedef long long ll;<br>typedef vector&lt;int&gt; vi;<br>typedef vector&lt;string&gt; vs;<br><br>vi parsevi(string s) {<br>  s += " ";<br>  vi res;<br>  int val = 0;<br>  FOR(t,0,Size(s)) {<br>    if(s[t] == ' ') { res.push_back(val); val = 0;}<br>    else {val *= 10; val += s[t] - '0';}<br>    }<br>   return res;<br>  }<br><br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br><br>int rgr[60][60];<br><br>bool con[60][60];<br><br>int X, Y;<br><br>vs bmp;<br><br>void group(int x, int y, int crc, char q) {<br>  if(rgr[y][x] != -1) return;<br>  if(bmp[y][x] != q) return;<br>  rgr[y][x] = crc;<br>  if(y &gt; 0) group(x, y-1, crc, q);<br>  if(y &lt; Y-1) group(x, y+1, crc, q);<br>  if(x &gt; 0) group(x-1, y, crc, q);<br>  if(x &lt; X-1) group(x+1, y, crc, q);<br>  }<br><br>class RingCount {<br>  public:<br>  int count(vector &lt;string&gt; bitmap) {<br>    bmp = bitmap;<br>    Y = Size(bitmap);<br>    X = Size(bitmap[0]);<br>    FOR(y,0,Y) FOR(x,0,X) rgr[y][x] = -1;<br>    int crc = 0;<br>    FOR(y,0,Y) FOR(x,0,X) if(rgr[y][x] == -1) {<br>      group(x,y, crc, bmp[y][x]);<br>      crc++;<br>      if(crc &gt;= 60) return -1;<br>      }<br>//  FOR(y,0,Y) {<br>//    FOR(x,0,X) printf("%d", rgr[y][x]);<br>//    printf("\n");<br>//    }<br>    FOR(y,0,Y) if(bmp[y][0] != '.') return -1;<br>    FOR(y,0,Y) if(bmp[y][X-1] != '.') return -1;<br>    FOR(x,0,X) if(bmp[0][x] != '.') return -1;<br>    FOR(x,0,X) if(bmp[Y-1][x] != '.') return -1;<br>    if(crc % 2) return -1;<br>    FOR(b,0,60) FOR(a,0,60) con[a][b] = false;<br>    FOR(x,0,X) FOR(y,0,Y-1) con[rgr[y][x]][rgr[y+1][x]] = true;<br>    FOR(x,0,X-1) FOR(y,0,Y) con[rgr[y][x]][rgr[y][x+1]] = true;<br>    printf("zz\n");<br>//  FOR(a,0,crc) {<br>//    FOR(b,0,crc) printf("%d", con[a][b]);<br>//    printf("\n");<br>//    }<br>    FOR(a,0,crc) FOR(b,a,crc) {<br>//    printf("%d,%d\n", a, b);<br>      con[a][b] |= con[b][a];<br>      if(a == b) continue;<br>      if(b == a+1) {if(!con[a][b]) return -1;}<br>      else {if(con[a][b]) return -1;}<br>      }<br>    FOR(x,0,X-1) FOR(y,0,Y-1) {<br>      int a = rgr[y][x];<br>      int b = rgr[y+1][x+1];<br>      if(a &gt; b+1 || b &gt; a+1) return -1;<br>      int c = rgr[y][x+1];<br>      int d = rgr[y+1][x];<br>      if(c &gt; d+1 || d &gt; c+1) return -1;<br>      }<br>    return crc/2;<br>    }<br>  };<br><br><br>// Powered by FileEdit<br></td>