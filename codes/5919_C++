<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;vector&gt;<br>#include &lt;string&gt;<br>using namespace std;<br> <br>class BallBouncing {<br>  public:<br>  int abs (int x) {if (x&lt;0) return -x; else return x;};<br>  int hr[50], hc[50], n;<br>  int bounces (int r, int c, int rr, int cc, vector &lt;string&gt; hh) {<br>    n=hh.size ();<br>    for (int i=0; i&lt;n; i++)<br>      sscanf (&amp;hh[i][0], "%d %d", &amp;hr[i], &amp;hc[i]);<br>    for (int i=0; i&lt;n; i++)<br>      hr[i]=2*hr[i]+1, hc[i]=2*hc[i]+1;<br>    r*=2; c*=2; rr*=2; cc*=2;<br>    int dr=1; int dc=1;<br>    int rb, cb, m, cnt=0, f;<br>    do {<br>      if (dr&gt;0) rb=r; else rb=0;<br>      if (dc&gt;0) cb=c; else cb=0;<br>      if (abs (rb-rr)&lt;abs (cb-cc)) m=abs (rb-rr), f=1; else m=abs (cb-cc), f=0;<br>      if (abs (rb-rr)==abs (cb-cc)) f=2;<br>      for (int i=0; i&lt;n; i++)<br>        if ((hr[i]-rr)*dr&gt;=0&amp;&amp;(hc[i]-cc)*dc&gt;=0&amp;&amp;(hr[i]-rr)*dr==(hc[i]-cc)*dc)<br>          return cnt;<br>      rr+=m*dr;<br>      cc+=m*dc;<br>      if (f==2) dr=-dr, dc=-dc; else<br>      if (f) dr=-dr; else dc=-dc;<br>      ++cnt;<br>    } while (cnt&lt;5000000); <br>    return -1;<br>  };<br>};<br></td>