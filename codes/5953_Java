<td class="problemText" colspan="8" valign="middle" align="left">
            import java.util.*;<br> <br>public class RobotTesting {<br>    boolean[][] u;<br>    boolean[][] v;<br>    long[][] a;<br>    int[] dx;<br>    int[] dy;<br>    int l;<br>    int n;<br> <br>    public long test(int i, int j) {<br>        if (u[i][j]) {<br>            return a[i][j];<br>        }<br>        if (v[i][j]) {<br>            u[i][j] = true;<br>            return a[i][j] = 50000;<br>        }<br>        v[i][j] = true;<br> <br>        int si = i;<br>        int sj = j;<br>        for (int k = 0; k &lt; l; k++) {<br>            i += dx[k];<br>            j += dy[k];<br>            if (i &lt; 0 || j &lt; 0 || i &gt;= n || j &gt;= n) {<br>                u[si][sj] = true;<br>                return a[si][sj] = k + 1;<br>            }<br>        }<br>        a[si][sj] = test(i, j) + l;<br>        if (a[si][sj] &gt; 50000) {<br>            a[si][sj] = 50000;<br>        }<br>        u[si][sj] = true;<br>        return a[si][sj];<br>    }<br> <br>    public double estimateCommands(int N, String program) {<br>        l = program.length();<br>        n = N;<br>        dx = new int[l];<br>        dy = new int[l];<br>        for (int i = 0; i &lt; l; i++) {<br>            switch (program.charAt(i)) {<br>                case 'U': dx[i] = 0; dy[i] = -1; break;<br>                case 'D': dx[i] = 0; dy[i] =  1; break;<br>                case 'L': dx[i] = -1; dy[i] = 0; break;<br>                case 'R': dx[i] = 1; dy[i] = 0; break;<br>            }<br>        }<br> <br>        u = new boolean[N][N];<br>        v = new boolean[N][N];<br>        a = new long[N][N];<br> <br>        long ans = 0;<br>        for (int i = 0; i &lt; N; i++) {<br>            for (int j = 0; j &lt; N; j++) {<br>                test(i, j);<br>                ans += a[i][j];<br>            }<br>        }<br> <br>        return ans * 1.0 / N / N;<br>    }<br> <br> <br>}<br> <br> <br>// Powered by PopsEdit<br> <br>// Powered by CodeProcessor<br></td>