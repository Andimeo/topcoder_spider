<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;iostream&gt;<br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;functional&gt;<br>#include &lt;numeric&gt;<br>#include &lt;cstdio&gt;<br>#include &lt;cstdlib&gt;<br>#include &lt;cmath&gt;<br>#include &lt;queue&gt;<br>using namespace std;<br>typedef vector&lt;int&gt; VI;  typedef vector&lt;vector&lt;int&gt; &gt; VVI;<br>typedef vector&lt;string&gt; VS;  typedef vector&lt;vector&lt;string&gt; &gt; VVS;<br>typedef vector&lt;long double&gt; VLD;  typedef vector&lt;vector&lt;long double&gt; &gt; VVLD;<br>typedef signed long long i64;  typedef unsigned long long u64;<br><br>int dx[4] = {1, 0, -1, 0};<br>int dy[4] = {0, 1, 0, -1};<br><br>VVLD mat(43, VLD(43)), mat2;<br>VS a;<br>int wn[50][50];<br><br>int follow(int x, int y, int d) {<br>  for(;;) {<br>    x += dx[d]; y += dy[d];<br>    if( x &lt; 0 || x &gt;= a[0].size() || y &lt; 0 || y &gt;= a.size() ) return 1;<br>    if( a[y][x] == 'S' ) return 1;<br>    if( a[y][x] == 'T' ) return 2;<br>    if( a[y][x] == '/' ) d ^= 3;<br>    if( a[y][x] == '\\' ) d ^= 1;<br>    if( a[y][x] == 'W' ) return wn[y][x]*4+3 + d;<br>  }<br>}<br><br>class TribbloTrouble {<br>public:<br>double terminates(vector &lt;string&gt; A) {<br>  a = A;<br>  int i, j, k, x, y, z, n;<br>  n = 0;<br>  for( y = 0; y &lt; a.size(); y++ )<br>  for( x = 0; x &lt; a[0].size(); x++ ) if( a[y][x] == 'W' )<br>    wn[y][x] = n++;<br>  for( y = 0; y &lt; a.size(); y++ )<br>  for( x = 0; x &lt; a[0].size(); x++ ) if( a[y][x] == 'S' )<br>    for( int d = 0; d &lt; 4; d++ ) mat[0][follow(x, y, d)] += 0.25;<br>  for( y = 0; y &lt; a.size(); y++ )<br>  for( x = 0; x &lt; a[0].size(); x++ ) if( a[y][x] == 'W' )<br>  for( int d = 0; d &lt; 4; d++ )<br>  for( int d2 = -1; d2 &lt;= 1; d2 += 2 )<br>    mat[wn[y][x]*4+3 + d][follow(x, y, (d+d2+4)%4)] += 0.5;<br>  mat[2][2] = 1.0;<br>  long double ret = 0.0;<br>  for( i = 0; i &lt; 200; i++ ) {<br>    VVLD mat2(43, VLD(43));<br>    for( y = 0; y &lt; 43; y++ )<br>    for( x = 0; x &lt; 43; x++ )<br>    for( k = 0; k &lt; 43; k++ )<br>      mat2[y][x] += mat[y][k]*mat[k][x];<br>    mat = mat2;<br>  }<br>  for( x = 0; x &lt; mat[0].size(); x++ ) ret += mat[0][x];<br>  return ret;<br>}<br>};<br><br><br>// Powered by FileEdit<br></td>