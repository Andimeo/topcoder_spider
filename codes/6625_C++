<td class="problemText" colspan="8" valign="middle" align="left">
            // another fine solution by misof<br>// #includes {{{<br>#include &lt;algorithm&gt;<br>#include &lt;numeric&gt;<br> <br>#include &lt;iostream&gt;<br>#include &lt;sstream&gt;<br>#include &lt;string&gt;<br>#include &lt;vector&gt;<br>#include &lt;queue&gt;<br>#include &lt;set&gt;<br>#include &lt;map&gt;<br> <br>#include &lt;cstdio&gt;<br>#include &lt;cstdlib&gt;<br>#include &lt;cctype&gt;<br>#include &lt;cassert&gt;<br> <br>#include &lt;cmath&gt;<br>#include &lt;complex&gt;<br>using namespace std;<br>// }}}<br> <br>/////////////////// PRE-WRITTEN CODE FOLLOWS, LOOK DOWN FOR THE SOLUTION ////////////////////////////////<br> <br>// pre-written code {{{<br>#define CLEAR(t) memset((t),0,sizeof(t))<br>#define FOR(i,a,b) for(int i=(int)(a);i&lt;=(int)(b);++i)<br>#define REP(i,n) for(int i=0;i&lt;(int)(n);++i)<br>#define SIZE(t) ((int)((t).size()))<br>// }}}<br> <br>/////////////////// CODE WRITTEN DURING THE COMPETITION FOLLOWS ////////////////////////////////<br> <br>int A[32][32];<br>int R,C;<br> <br>int B[32][32];<br> <br>int memo[32][32][32][32][4];<br> <br>#define SUM(r1,c1,r2,c2) ( B[r2][c2] - B[r2][c1] - B[r1][c2] + B[r1][c1] )<br> <br>int solve(int r1, int c1, int r2, int c2, int cnt) {<br>  int &amp;res = memo[r1][c1][r2][c2][cnt];<br>  if (res &gt; -987654321) return res;<br> <br>  if (cnt == 1) {<br>    res &gt;?= SUM(r1,c1,r2,c2);<br>    if (c2-c1 &gt; 1) {<br>      res &gt;?= solve(r1,c1+1,r2,c2,1);<br>      res &gt;?= solve(r1,c1,r2,c2-1,1);<br>    }<br>    if (r2-r1 &gt; 1) {<br>      res &gt;?= solve(r1+1,c1,r2,c2,1);<br>      res &gt;?= solve(r1,c1,r2-1,c2,1);<br>    }<br>    return res;<br>  } else {<br>    FOR(p,1,cnt-1) FOR(rr,r1+1,r2-1) {<br>      int toto = 0;<br>      toto += solve(r1,c1,rr,c2,p);<br>      toto += solve(rr,c1,r2,c2,cnt-p);<br>      res &gt;?= toto;<br>    }<br>    FOR(p,1,cnt-1) FOR(cc,c1+1,c2-1) {<br>      int toto = 0;<br>      toto += solve(r1,c1,r2,cc,p);<br>      toto += solve(r1,cc,r2,c2,cnt-p);<br>      res &gt;?= toto;<br>    }<br>    return res;<br>  }<br>}<br> <br>class ThreeMines {<br>public:<br>  int maximumProfit(vector &lt;string&gt; field) {<br>    R = SIZE(field), C = SIZE(field[0]);<br> <br>    REP(r,R) REP(c,C) {<br>      if (islower(field[r][c])) A[r][c] = field[r][c]-'a';<br>      if (isupper(field[r][c])) A[r][c] = 'A'-field[r][c];<br>    }<br> <br>    CLEAR(B);<br> <br>    FOR(r,1,R) FOR(c,1,C) B[r][c] = B[r-1][c] + B[r][c-1] - B[r-1][c-1] + A[r-1][c-1];<br> <br>    REP(a,32) REP(b,32) REP(c,32) REP(d,32) REP(e,4) memo[a][b][c][d][e] = -987654321;<br>    <br>    return solve(0,0,R,C,3);<br>  }<br> <br> <br>};<br> <br> <br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003]<br>// Powered by CodeProcessor<br></td>