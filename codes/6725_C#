<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Collections.Specialized;<br>using System.Text;<br>using System.Text.RegularExpressions;<br> <br>public class FactoryCounting<br>{<br> <br>    bool [,] a = new bool[32,32];<br> <br>    long[,] C = new long[32, 32];<br> <br>    int[] e = new int[32];<br> <br>    long ans = 0;<br>    int m;<br> <br>    int n;<br> <br>    void DFS(int rest, int start, int mm)<br>    {<br>        if (rest == 0)<br>        {<br>            int count = 0;<br>            for (int j = 0; j &lt; n; j++)<br>                if ((mm &amp; (1 &lt;&lt; j)) &gt; 0) count++;<br>            if (count &gt;= m)<br>                ans += C[count, m];<br>            return;<br>        }<br>        for (int i = start; i + rest &lt;= n; i++)<br>        {<br>            DFS(rest - 1, i + 1, mm &amp; (e[i]));<br>        }<br>    }<br> <br>    public long count(int n0, int m0, string[] county)<br>    {<br> <br>        m = m0;<br>        n = county.Length;<br>        Console.WriteLine(n);<br>        int i, j;<br>        for (i = 0; i &lt; n; i++)<br>        {<br>            for (j = 0; j &lt; n; j++)<br>            {<br>                a[i, j] = (county[i][j] == 'Y');<br>                if (a[i, j]) e[i] |= (1 &lt;&lt; j);<br>            }<br>        }<br> <br> <br>         for (i = 0; i &lt; 31; i++)<br>         {<br>             C[i, 0] = 1;<br>             if (i&gt;0)<br>             for (j = 1; j &lt; 9; j++)<br>                 C[i, j] = C[i - 1, j] + C[i - 1, j - 1];<br>         }<br> <br>         DFS(n0,0,(1&lt;&lt;n)-1);<br> <br>         return ans;<br>    }<br>}<br></td>