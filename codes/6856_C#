<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections.Generic;<br><br>public class LongLongNim {<br>  public int numberOfWins(int maxN, int[] moves) {<br>    int mask = (1 &lt;&lt; 22) - 1;<br>    int res = -1;<br>    Dictionary&lt;int, int&gt; last = new Dictionary&lt;int, int&gt;();<br>    List&lt;int&gt; r = new List&lt;int&gt;();<br>    for (int i = 0; i &lt;= maxN; ++i)<br>    {<br>      mask &lt;&lt;= 1;<br>      ++res;<br>      foreach (int j in moves)<br>        if ((mask &amp; (1 &lt;&lt; j)) == 0)<br>        {<br>          ++mask;<br>          --res;<br>          break;<br>        }<br>      mask &amp;= (1 &lt;&lt; 22) - 1;<br>      if (last.ContainsKey(mask))<br>      {<br>        int pLength = i - last[mask];<br>        int cnt = (maxN - i) / pLength;<br>        i += cnt * pLength;<br>        res += cnt * (res - r[last[mask]]);<br>      }<br>      last[mask] = i;<br>      r.Add(res);<br>    }<br>    return res;<br>  }<br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>