<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections.Generic;<br>using System.Text;<br><br>//namespace TopCoderDec28<br>//{<br>    public class Squares<br>    {<br>        <br>        public static int countSquares(string[] field)<br>        {<br>        int x3, y3, x4, y4;<br>        int Count = 0;<br>            for (int y1 = 0; y1 &lt; field.Length; y1++)<br>            {<br>                for (int x1 = 0; x1 &lt; field[0].Length; x1++)<br>                {<br>                    for (int y2 = y1; y2 &lt; field.Length; y2++)<br>                    {<br>                        for (int x2 = x1 + 1; x2 &lt; field[0].Length; x2++)<br>                        {<br>                            if (field[y1][x1] == field[y2][x2])<br>                            {<br>                                int DeltaX = x2 - x1;<br>                                int DeltaY = y2 - y1;<br><br>                                if (y2 &gt; y1)<br>                                {<br>                                    DeltaX *= -1;<br>                                    DeltaY *= -1;<br>                                }<br><br>                                x3 = x2 + DeltaY;<br>                                x4 = x1 + DeltaY;<br>                                y3 = y2 - DeltaX;<br>                                y4 = y1 - DeltaX;<br><br>                                if (x3 &lt; 0 || x3 &gt;= field[0].Length || x4 &lt; 0 || x4 &gt;= field[0].Length)<br>                                    continue;<br>                                if (y3 &lt; 0 || y3 &gt;= field.Length || y4 &lt; 0 || y4 &gt;= field.Length)<br>                                    continue;<br><br>                                if (field[y1][x1] == field[y3][x3] &amp;&amp; field[y1][x1] == field[y4][x4])<br>                                    Count++;<br>                            }<br>                        }<br>                    }<br>                }<br>            }<br>            return Count;<br>        }<br>    }<br>//}<br></td>