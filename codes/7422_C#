<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Collections.Specialized;<br>using System.Text;<br>using System.Text.RegularExpressions;<br> <br>public class TestBettingStrategy<br>{<br>  int goal;<br>  double p;<br>  <br>  double[,,] ret = new double[1005,60,20];<br>  public double go( int current, int rounds, int bet ) {<br>    /* Win */<br>    if ( current &gt;= goal ) return 1.0;<br>    if ( current &lt;= 0 || rounds == 0 || ( current &lt; ( 1 &lt;&lt; bet ) ) ) return 0.0;<br>    if ( ret[current,rounds,bet] &gt;= -0.5 ) return ret[current,rounds,bet];<br> <br>    return ret[current,rounds,bet] = ( ( p ) * go( current + ( 1 &lt;&lt; bet ), rounds - 1, 0 ) +<br>      ( 1 - p ) * go( current - ( 1 &lt;&lt; bet ), rounds - 1, bet + 1 ) );<br>  }<br>  <br>  public double winProbability(int initSum, int goalSum, int rounds, int prob)<br>  {<br>    for ( int i = 0; i &lt; 1005; i++ ) for ( int j = 0; j &lt; 60; j++ ) for ( int k = 0; k &lt; 20; k++ ) ret[i,j,k] = -1.0;<br>  <br>    goal = goalSum;<br>    p = (double) prob / 100.0;<br>    return go( initSum, rounds, 0 );<br>  }<br> <br> <br>}<br>//Powered by [KawigiEdit] 2.0!<br></td>