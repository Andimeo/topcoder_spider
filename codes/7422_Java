<td class="problemText" colspan="8" valign="middle" align="left">
            import java.util.*;<br>public class TestBettingStrategy<br>{<br>  public double winProbability(int initSum, int goalSum, int rounds, int prob)<br>  {<br>    this.prob = prob/100.0;<br>    this.goalSum = goalSum;<br>    maxRounds = rounds;<br>    <br>    memo = new double[goalSum+1][rounds][rounds];<br>    for(int i=0;i&lt;memo.length;i++) for(int j=0;j&lt;memo[i].length;j++)<br>      Arrays.fill(memo[i][j],-1.0);<br>    <br>    return solve(initSum,0,0);<br>  }<br>  double[][][] memo;<br>  int maxRounds, goalSum;<br>  double prob;<br>  double solve(int sum, int round, int losses)<br>  {<br>    if(sum&gt;=goalSum)<br>      return 1.0;<br>    if(round&gt;=maxRounds)<br>      return 0.0;<br>    if(memo[sum][round][losses]&lt;-0.5)<br>    {<br>      double res = 0;<br>      long bet = 1L&lt;&lt;losses;<br>      if(bet&lt;=sum)<br>      {<br>        res += prob*solve((int)(sum+bet),round+1,0);<br>        res += (1-prob)*solve((int)(sum-bet),round+1,losses+1);<br>      }<br>      memo[sum][round][losses] = res;<br>    }<br>    return memo[sum][round][losses];<br>  }<br>}<br></td>