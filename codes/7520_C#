<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections;<br>using System.Collections.Generic;<br>using System.Text;<br><br>public class NavalBattle<br>{<br>    int n, m;<br>    bool[] a, b;<br><br>    bool[,] used, memo;<br><br>    bool valid(int index, int one)<br>    {<br><br>        if (index &gt;= n)<br>        {<br>            if (one == 1) return true;<br>            return false;<br>        }<br><br>        if (used[index, one]) return memo[index, one];<br><br>        bool ret = false;<br><br>        if (!a[index]) ret = valid(index + 1, one);<br><br>        if (!b[index] &amp;&amp; index+m &lt;=n )<br>        {<br><br>            bool ok = true;<br><br>            for (int i = 0; i &lt; m; i++)<br>            {<br>                if (b[i + index]) ok = false;<br>            }<br>            if (index + m &lt; n &amp;&amp; a[index + m]) ok = false;<br><br>            if (ok) ret |= valid(index + m + 1, 1);                    <br>        }<br><br>        used[index, one] = true;<br>        memo[index, one] = ret;<br>        return ret;<br><br>    }<br><br>    public int firstDishonestMove(int fieldLength, int shipLength, int[] shots, string answers)<br>  {<br>        n = fieldLength;<br>        m = shipLength;<br><br>        a = new bool[n];<br>        b = new bool[n];<br><br>        used = new bool[n, 2];<br>        memo = new bool[n, 2];<br><br>        for (int i = 0; i &lt; shots.Length; i++)<br>        {<br>            if (answers[i] == '1')<br>                a[shots[i]] = true;<br>            else<br>                b[shots[i]] = true;<br><br>            if (a[shots[i]] &amp;&amp; b[shots[i]]) return i;<br><br>            Array.Clear(used, 0, 2 * n);<br>            Array.Clear(memo, 0, 2 * n);<br>            if (!valid(0, 0)) return i;<br>        }<br><br>        return -1;<br><br>    <br>  }<br>  }<br></td>