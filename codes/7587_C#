<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections.Generic;<br>using System.Text;<br>using System.Text.RegularExpressions;<br><br>public class BagsQuiz<br>{<br>    public int checkIfProper(int n, string[] actions)<br>    {<br>        int[] parent = new int[n + 1];<br><br>        foreach (string action in actions)<br>        {<br>            string[] spl = action.Split(' ');<br>            if (spl[0] == "PUT")<br>            {<br>                int a = int.Parse(spl[1]);<br>                int b = int.Parse(spl[3]);<br>                if (parent[a] != 0 || parent[b] != 0)<br>                    return -1;<br>                parent[a] = b;<br>            }<br>            if (spl[0] == "SET")<br>            {<br>                int a = int.Parse(spl[1]);<br>                if (parent[a] != 0)<br>                    return -1;<br>                for (int i = 1; i &lt;= n; i++)<br>                {<br>                    if (parent[i] == a)<br>                        parent[i] = 0;<br>                }<br>            }<br>            if (spl[0] == "SWAP")<br>            {<br>                int a = int.Parse(spl[1]);<br>                int b = int.Parse(spl[3]);<br>                if (parent[a] != 0 || parent[b] != 0)<br>                    return -1;<br>                for (int i = 1; i &lt;= n; i++)<br>                {<br>                    if (parent[i] == a)<br>                        parent[i] = b;<br>                    else if (parent[i] == b)<br>                        parent[i] = a;<br>                }<br>            }<br>        }<br><br>        int ret = 0;<br>        for (int i = 1; i &lt;= n; i++)<br>        {<br>            if (parent[i] == 0)<br>                ret++;<br>            else if (parent[i] &lt; i)<br>                return -1;<br>        }<br><br>        return ret;<br>    }<br>}<br></td>