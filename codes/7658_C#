<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br><br>public class RooksPlacement {<br>  bool[, ,] got;<br>  long[, ,] res;<br>  const long MODULO = 1000001;<br>  <br>  public int countPlacements(int N, int M, int K) {<br>    got = new bool[N + 1, M + 1, K + 1];<br>    res = new long[N + 1, M + 1, K + 1];<br>    return (int) get(N, M, K);<br>  }<br><br>  private long get(int n, int m, int k)<br>  {<br>    if (n &lt; 0 || m &lt; 0 || k &lt; 0)<br>      return 0;<br>    if (k == 0)<br>      return 1;<br>    if (n == 0 || m == 0)<br>      return 0;<br>    if (got[n, m, k])<br>      return res[n, m, k];<br>    long r = (get(n - 1, m, k) + m * (get(n - 1, m - 1, k - 1) + (n - 1) * get(n - 2, m - 1, k - 2)) + m * (m - 1) / 2 * get(n - 1, m - 2, k - 2)) % MODULO;<br>    got[n, m, k] = true;<br>    res[n, m, k] = r;<br>    return r;<br>  }<br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>