<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Collections.Generic;<br>using System.Text;<br><br>public class IsoscelesTriangles {<br>    public long count(int N, int M) {<br>        long res = 0;<br>        for (int r = 0; r &lt; N; ++r) {<br>            long[] am = new long[N * N + M * M + 10];<br>            long sum = 0;<br>            for (int r1 = 0; r1 &lt; N; ++r1)<br>                for (int c1 = 0; c1 &lt; M; ++c1) {<br>                    int len = (r1 - r) * (r1 - r) + c1 * c1;<br>                    long old = am[len];<br>                    sum += old;<br>                    am[len] = old + 1;<br>                }<br>            for (int c = 0; c &lt; M; ++c) {<br>                res += sum;<br>                int dc = Math.Min(c, M - 1 - c);<br>                int dr = Math.Min(r, N - 1 - r);<br>                res -= ((2 * dr + 1) * (2 * dc + 1) - 1) / 2;<br>                for (int r1 = 0; r1 &lt; N; ++r1) {<br>                    int c1 = M - 1;<br>                    int len = (r1 - r) * (r1 - r) + (c1 - c) * (c1 - c);<br>                    long old = am[len];<br>                    sum -= (old - 1);<br>                    am[len] = old - 1;<br>                    c1 = 0;<br>                    len = (r1 - r) * (r1 - r) + (c1 - c - 1) * (c1 - c - 1);<br>                    old = am[len];<br>                    sum += old;<br>                    am[len] = old + 1;<br>                }<br>            }<br>        }<br>        return res;<br>    }<br>}<br><br><br>// Powered by FileEdit<br></td>