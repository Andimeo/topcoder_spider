<td class="problemText" colspan="8" valign="middle" align="left">
            import java.util.*;<br><br>public class TheLuckySum {<br><br>  int fail[] = { 1, 2, 3, 5, 6, 9, 10, 13, 17 };<br>  Hashtable&lt;Integer, Integer&gt; error;<br><br>  public int[] sum(int n) {<br><br>    for(int x : fail) {<br>      if( n == x ) { return new int[0]; }<br>    }<br><br>    error = new Hashtable&lt;Integer, Integer&gt;();<br><br>    int use = 0;<br>    while(true) {<br>      ++use;<br>      try {<br>        return check(n, use);<br>      }<br>      catch(Error e) { continue; }<br>    }<br><br>  }<br><br>  int[] check(int n, int use) {<br>    if( error.get(n) != null &amp;&amp; error.get(n) &gt;= use ) { throw new Error(); }<br>    int ret[] = new int[use];<br>    if( n == 0 ) { return new int[use]; }<br>    for(int j=1; j&lt;=use; ++j) {<br>      for(int i=0; i&lt;=j; ++i) {<br>        int tail = 4 * i + 7 * (j - i);<br>        if( n &lt; tail || (n - tail) % 10 != 0 ) { continue; }<br>        try {<br>          int tmp[] = check((n - tail) / 10, j);<br>          int off = use - j;<br>          for(int k=0; k&lt;i; ++k) {<br>            ret[off+k] = tmp[k] * 10 + 4;<br>          }<br>          for(int k=i; k&lt;j; ++k) {<br>            ret[off+k] = tmp[k] * 10 + 7;<br>          }<br>          return ret;<br>        }<br>        catch(Error e) { continue; }<br>      }<br>    }<br>    if( error.get(n) == null || error.get(n) &lt; use ) { error.put(n, use); }<br>    throw new Error();<br>  }<br><br>}<br></td>