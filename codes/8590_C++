<td class="problemText" colspan="8" valign="middle" align="left">
            #include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>#include &lt;sstream&gt;<br>#include &lt;vector&gt;<br>#include &lt;cmath&gt;<br>#include &lt;map&gt;<br>using namespace std;<br> <br>typedef vector&lt;int&gt; VI;<br>map &lt;VI, double&gt; memo;<br> <br>double f(VI a)<br>{<br>  if (memo.count(a)) return memo[a];<br>  double &amp;res = memo[a];<br>  res = 0;<br> <br>  int denom = 0;<br>  for (int i = 0; i &lt; (int)a.size(); i++)<br>    for (int j = i+1; j &lt; (int)a.size(); j++) {<br>      if (a[i] &gt; a[j]) {<br>        swap(a[i], a[j]);<br>        res += 1 + f(a);<br>        swap(a[i], a[j]);<br>        denom++;<br>      }<br>    }<br> <br>  if (denom == 0) {<br>    res = 0;<br>  } else {<br>    res /= denom;<br>  }<br>  <br>  return res;<br>}<br> <br>struct RandomSort {<br>  double getExpected(vector&lt;int&gt; permutation) {<br>    return f(permutation);    <br>  }<br>};<br></td>