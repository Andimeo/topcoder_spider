<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br><br>public class PseudoRandomKingdom {<br>  public double probabilityOfHappiness(string[] g, int cost, int savings) {<br>        double[] r = dfs(g, 0, -1, cost, savings);<br>        double res = 0;<br>        foreach (double x in r)<br>            res += x;<br>        for (int i = 0; i &lt; g.Length - 1; ++i)<br>            res /= (cost + 1);<br>        return res;<br>  }<br><br>    private double[] dfs(string[] g, int root, int parent, int cost, int savings)<br>    {<br>        double[] res = new double[savings + 1];<br>        res[0] = 1;<br>        foreach (int x in Array.ConvertAll&lt;string, int&gt;(g[root].Split(' '), int.Parse))<br>        {<br>            if (x == parent)<br>                continue;<br>            double[] that = dfs(g, x, root, cost, savings);<br>            double[] nres = new double[savings + 1];<br>            for (int c = 0; c &lt;= cost; ++c)<br>            {<br>                for (int u = 0; u + c &lt;= savings; ++u)<br>                    for (int v = 0; u + v + c &lt;= savings; ++v)<br>                    {<br>                        nres[Math.Max(u, v + c)] += res[u] * that[v];<br>                    }<br>            }<br>            res = nres;<br>        }<br>        return res;<br>    }<br><br><br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by TZTester 1.01 [25-Feb-2003] [modified for C# by Petr]<br>// Powered by CodeProcessor<br></td>