<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br>using System.Text;<br>using System.Text.RegularExpressions;<br>using System.Collections;<br><br>public class FixImage {<br>  private bool[,] a;<br>  private int mx;<br>  private int my;<br>  private int[,] f;<br><br>  int[] dx = new int[] {1, 0, -1, 0};<br>  int[] dy = new int[] {0, 1, 0, -1};<br><br>  public string[] originalImage(string[] alteredImage) {<br>    mx = alteredImage[0].Length;<br>    my = alteredImage.Length;<br>    a = new bool[mx,my];<br>    for (int x = 0; x &lt; mx; x++)<br>    {<br>      for (int y = 0; y &lt; my; y++)<br>      {<br>        a[x, y] = alteredImage[y][x] == '#';<br>      }<br>    }<br><br>    bool changed;<br>    do<br>    {<br>      changed = false;<br>      f = new int[mx,my];<br>      int c = 1;<br><br>      while (true)<br>      {<br>        int fx = -1, fy = -1;<br>        for (int x = 0; x &lt; mx &amp;&amp; fx &lt; 0; x++)<br>        {<br>          for (int y = 0; y &lt; my; y++)<br>          {<br>            if (a[x, y] &amp;&amp; f[x, y] == 0)<br>            {<br>              fx = x;<br>              fy = y;<br>              break;<br>            }<br>          }<br>        }<br>        if (fx == -1)<br>          break;<br>        fill(c, fx, fy);<br>        c++;<br>      }<br><br>      for (int y = 0; y &lt; my; y++)<br>      for (int x = 0; x &lt; mx - 1; x++)<br>      {<br>        if (f[x, y] == 0)<br>          continue;<br><br>        int to = x;<br>        for (int x1 = x + 1; x1 &lt; mx; x1++)<br>        {<br>          if (f[x, y] == f[x1, y])<br>            to = x1;<br>        }<br>        for (int xx = x + 1; xx &lt;= to; xx++)<br>        {<br>          if (!a[xx, y])<br>          {<br>            a[xx, y] = true;<br>            changed = true;<br>          }<br>        }<br>      }<br><br>      for (int x = 0; x &lt; mx; x++)<br>      for (int y = 0; y &lt; my - 1; y++)<br>      {<br>        if (f[x, y] == 0)<br>          continue;<br><br>        int to = y;<br>        for (int y1 = y + 1; y1 &lt; my; y1++)<br>        {<br>          if (f[x, y] == f[x, y1])<br>            to = y1;<br>        }<br>        for (int yy = y + 1; yy &lt;= to; yy++)<br>        {<br>          if (!a[x, yy])<br>          {<br>            a[x, yy] = true;<br>            changed = true;<br>          }<br>        }<br>      }<br>    } while (changed);<br><br>        string[] res = new string[my];<br>    for (int y = 0; y &lt; my; y++)<br>    {<br>      res[y] = "";<br>      for (int x = 0; x &lt; mx; x++)<br>      {<br>        res[y] += a[x, y] ? "#" : ".";<br>      }<br>    }<br>        return res;<br>    }<br><br>  private void fill(int c, int fx, int fy)<br>  {<br>    f[fx, fy] = c;<br>    for (int i = 0; i &lt; 4; i++)<br>    {<br>      int x = fx + dx[i];<br>      int y = fy + dy[i];<br>      if (x &gt;= 0 &amp;&amp; x &lt; mx &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; my &amp;&amp; a[x, y] &amp;&amp; f[x, y] == 0)<br>        fill(c, x, y);<br>    }<br>  }<br><br>}<br><br><br>// Powered by FileEdit<br>// Powered by CodeProcessor<br></td>