<td class="problemText" colspan="8" valign="middle" align="left">
            using System;<br> <br>public class CollectingMarbles<br>{<br>  public int mostMarbles(int[] marblesWeights, int bagCapacity, int numberOfBags)<br>  {<br>    int N = marblesWeights.Length;<br>    int[, ] A = new int[1&lt;&lt;N, numberOfBags+1];<br>    for(int i=1; i&lt;(1&lt;&lt;N); i++) {<br>      for(int j=1; j&lt;=numberOfBags; j++) {<br>        A[i, j] = 0;<br>        for(int t=1; t&lt;=i; t++) {<br>          if((i&amp;t)==t) {<br>            int sum = 0;<br>            int cnt = 0;<br>            for(int h=0; h&lt;N; h++) {<br>              if((t&amp;(1&lt;&lt;h))&gt;0) {<br>                sum += marblesWeights[h];<br>                cnt++;<br>              }<br>            }<br>            if(sum&lt;=bagCapacity) {<br>              A[i, j] = Math.Max(A[i, j], A[i-t, j-1] + cnt);<br>            }<br>          }<br>        }<br>      }<br>    }<br>    return A[(1&lt;&lt;N)-1, numberOfBags];<br>  }<br> <br> <br>}<br></td>